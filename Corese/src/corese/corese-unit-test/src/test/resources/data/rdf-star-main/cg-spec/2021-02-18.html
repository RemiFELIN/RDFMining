<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 26.0.1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
aside.example,div.example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
aside.example,div.example{padding:.5em;border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
aside.example div.example span.example-title{color:#999}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font:small Helvetica Neue,sans-serif,Droid Sans Fallback;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:0.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
  
  
<title>RDF-star and SPARQL-star</title>
  
  
  
<style>

    /* copied from TR/turtle, and adapted for SPARQL rules */
    .grammar td { font-family: monospace; vertical-align: top; }
    .grammar-literal, .token { color: gray;}
    .grammar_comment { color: #A52A2A; font-style: italic; }

    /* better looking embedded examples */
    .example .example {
      border-left-width: .15em;
    }

    /* remove "unofficial draft" watermark */
    body {
      background: url('https://www.w3.org/StyleSheets/TR/2016/logos/back-cg-draft') no-repeat !important;
    }
  
</style>
  
<script>
    /* copied from JSON-LD specs */
    function updateExample(doc, content) {
      // perform transformations to make it render and prettier
      return _esc(reindent(unComment(doc, content)));
    }

    function _esc(s) {
      return s.replace(/&/g,'&amp;')
        .replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;')
        .replace(/</g,'&lt;');
    }

    function reindent(text) {
      // TODO: use trimEnd when Edge supports it
      const lines = text.trimRight().split("\n");
      while (lines.length && !lines[0].trim()) {
        lines.shift();
      }
      const indents = lines.filter(s => s.trim()).map(s => s.search(/[^\s]/));
      const leastIndent = Math.min(...indents);
      return lines.map(s => s.slice(leastIndent)).join("\n");
    }

    function unComment(doc, content) {
      // perform transformations to make it render and prettier
      return content
        .replace(/<!--/, '')
        .replace(/-->/, '')
        .replace(/< !\s*-\s*-/g, '<!--')
        .replace(/-\s*- >/g, '-->')
        .replace(/-\s*-\s*&gt;/g, '--&gt;');
    }
  </script>

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
.hljs{background:0 0!important}
a abbr,h1 abbr,h2 abbr,h3 abbr,h4 abbr,h5 abbr,h6 abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop 0.25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop 0.4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
code{color:#c63501}
th code{color:inherit}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:0.3em;background-color:#fff;padding-bottom:0.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
a[href].self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
h2,h3,h4,h5,h6{position:relative}
aside.example .marker>a.self-link{color:inherit}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{border:none;color:inherit;font-size:83%;height:2em;left:-1.6em;opacity:.5;position:absolute;text-align:center;text-decoration:none;top:0;transition:opacity .2s;width:2em}
h2>a.self-link::before,h3>a.self-link::before,h4>a.self-link::before,h5>a.self-link::before,h6>a.self-link::before{content:"§";display:block}
@media (max-width:767px){
dd{margin-left:0}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{left:auto;top:auto}
}
@media print{
.removeOnSave{display:none}
}
</style>
<meta name="description" content="TODO">
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "specStatus": "CG-DRAFT",
  "edDraftURI": "https://w3c.github.io/rdf-star/cg-spec/editors_draft.html",
  "editors": [
    {
      "name": "Olaf Hartig",
      "url": "http://olafhartig.de/",
      "company": "Linköping University",
      "orcid": "https://orcid.org/0000-0002-1741-2090",
      "companyURL": "https://liu.se/"
    },
    {
      "name": "Pierre-Antoine Champin",
      "url": "http://champin.net/",
      "company": "ERCIM",
      "companyURL": "https://www.ercim.eu/",
      "w3cid": 42931,
      "orcid": "https://orcid.org/0000-0001-7046-4474"
    }
  ],
  "authors": [
    {
      "name": "Dörthe Arndt",
      "company": "TU Dresden"
    },
    {
      "name": "Jeen Broekstra",
      "company": "metaphacts"
    },
    {
      "name": "Bob DuCharme",
      "company": "CCRi"
    },
    {
      "name": "Gregg Kellogg",
      "company": "no affiliation"
    },
    {
      "name": "Peter F. Patel-Schneider",
      "company": "PARC"
    },
    {
      "name": "Eric Prud'hommeaux",
      "company": "Janeiro Digital, W3C/MIT"
    },
    {
      "name": "Andy Seaborne",
      "company": "Apache Software Foundation"
    },
    {
      "name": "Ted Thibodeau, Jr.",
      "company": "OpenLink Software, Inc."
    },
    {
      "name": "Bryan Thompson",
      "company": "Amazon"
    }
  ],
  "otherLinks": [
    {
      "key": "Participate",
      "data": [
        {
          "value": "GitHub w3c/rdf-star",
          "href": "https://github.com/w3c/rdf-star/"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/w3c/rdf-star/issues/"
        },
        {
          "value": "Commit history",
          "href": "https://github.com/w3c/rdf-star/commits/main"
        },
        {
          "value": "Pull requests",
          "href": "https://github.com/w3c/rdf-star/pulls/"
        }
      ]
    },
    {
      "key": "Contributors",
      "data": [
        {
          "value": "James Anderson (datagraph gmbh)"
        },
        {
          "value": "Ghislain Atemezing (Mondeca)"
        },
        {
          "value": "Pavel Klinov (Stardog Union)"
        },
        {
          "value": "Holger Knublauch (TopQuadrant, Inc.)"
        },
        {
          "value": "Andreas Kuckartz"
        }
      ]
    },
    {
      "key": "This version",
      "data": [
        {
          "value": "https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html",
          "href": "https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html"
        }
      ]
    },
    {
      "key": "Latest published version",
      "data": [
        {
          "value": "https://w3c.github.io/rdf-star/cg-spec/",
          "href": "https://w3c.github.io/rdf-star/cg-spec/"
        }
      ]
    }
  ],
  "github": {
    "repoURL": "w3c/rdf-star",
    "branch": "main"
  },
  "shortName": "rdf-star",
  "group": "rdf-dev",
  "xref": [
    "RDF11-CONCEPTS",
    "SPARQL11-QUERY",
    "RDF11-MT"
  ],
  "maxTocLevel": 3,
  "publishISODate": "2021-02-18T00:00:00.000Z",
  "generatedSubtitle": "Draft Community Group Report 18 February 2021"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/cg-draft"></head>
<body class="h-entry" data-cite="RDF11-CONCEPTS SPARQL11-QUERY RDF11-MT"><div class="head">
    <a class="logo" href="https://www.w3.org/"><img alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72" height="48"></a> <h1 id="title" class="title">RDF-star and SPARQL-star</h1>
    
    <h2>
      Draft Community Group Report
      <time class="dt-published" datetime="2021-02-18">18 February 2021</time>
    </h2>
    <dl>
      
      
      <dt>This version:</dt><dd>
        <a href="https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html">https://w3c.github.io/rdf-star/cg-spec/2021-02-18.html</a>
      </dd><dt>Latest published version:</dt><dd>
        <a href="https://w3c.github.io/rdf-star/cg-spec/">https://w3c.github.io/rdf-star/cg-spec/</a>
      </dd>      
      <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/rdf-star/cg-spec/editors_draft.html">https://w3c.github.io/rdf-star/cg-spec/editors_draft.html</a></dd>
      
      
      
      <dt>Editors:</dt>
      <dd class="p-author h-card vcard"><a class="u-url url p-name fn" href="http://olafhartig.de/">Olaf Hartig</a><a class="p-name orcid" href="https://orcid.org/0000-0002-1741-2090"><svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
  <style>

    .st1 {
      fill: #fff;
    }
  
</style>
  <path d="M256 128c0 70.7-57.3 128-128 128S0 198.7 0 128 57.3 0 128 0s128 57.3 128 128z" fill="#a6ce39"></path>
  <path class="st1" d="M86.3 186.2H70.9V79.1h15.4v107.1zM108.9 79.1h41.6c39.6 0 57 28.3 57 53.6 0 27.5-21.5 53.6-56.8 53.6h-41.8V79.1zm15.4 93.3h24.5c34.9 0 42.9-26.5 42.9-39.7C191.7 111.2 178 93 148 93h-23.7v79.4zM88.7 56.8c0 5.5-4.5 10.1-10.1 10.1s-10.1-4.6-10.1-10.1c0-5.6 4.5-10.1 10.1-10.1s10.1 4.6 10.1 10.1z"></path>
</svg>
        </a>
            (<a class="p-org org h-org h-card" href="https://liu.se/">Linköping University</a>)
          </dd><dd class="p-author h-card vcard" data-editor-id="42931"><a class="u-url url p-name fn" href="http://champin.net/">Pierre-Antoine Champin</a><a class="p-name orcid" href="https://orcid.org/0000-0001-7046-4474"><svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
  <style>

    .st1 {
      fill: #fff;
    }
  
</style>
  <path d="M256 128c0 70.7-57.3 128-128 128S0 198.7 0 128 57.3 0 128 0s128 57.3 128 128z" fill="#a6ce39"></path>
  <path class="st1" d="M86.3 186.2H70.9V79.1h15.4v107.1zM108.9 79.1h41.6c39.6 0 57 28.3 57 53.6 0 27.5-21.5 53.6-56.8 53.6h-41.8V79.1zm15.4 93.3h24.5c34.9 0 42.9-26.5 42.9-39.7C191.7 111.2 178 93 148 93h-23.7v79.4zM88.7 56.8c0 5.5-4.5 10.1-10.1 10.1s-10.1-4.6-10.1-10.1c0-5.6 4.5-10.1 10.1-10.1s10.1 4.6 10.1 10.1z"></path>
</svg>
        </a>
            (<a class="p-org org h-org h-card" href="https://www.ercim.eu/">ERCIM</a>)
          </dd>
      
      <dt>Authors:</dt><dd class="p-author h-card vcard"><span class="p-name fn">Dörthe Arndt</span> (TU Dresden) </dd><dd class="p-author h-card vcard"><span class="p-name fn">Jeen Broekstra</span> (metaphacts) </dd><dd class="p-author h-card vcard"><span class="p-name fn">Bob DuCharme</span> (CCRi) </dd><dd class="p-author h-card vcard"><span class="p-name fn">Gregg Kellogg</span> (no affiliation) </dd><dd class="p-author h-card vcard"><span class="p-name fn">Peter F. Patel-Schneider</span> (PARC) </dd><dd class="p-author h-card vcard"><span class="p-name fn">Eric Prud'hommeaux</span> (Janeiro Digital, W3C/MIT) </dd><dd class="p-author h-card vcard"><span class="p-name fn">Andy Seaborne</span> (Apache Software Foundation) </dd><dd class="p-author h-card vcard"><span class="p-name fn">Ted Thibodeau, Jr.</span> (OpenLink Software, Inc.) </dd><dd class="p-author h-card vcard"><span class="p-name fn">Bryan Thompson</span> (Amazon) </dd>
      <dt>Contributors:</dt><dd>
        James Anderson (datagraph gmbh)
      </dd><dd>
        Ghislain Atemezing (Mondeca)
      </dd><dd>
        Pavel Klinov (Stardog Union)
      </dd><dd>
        Holger Knublauch (TopQuadrant, Inc.)
      </dd><dd>
        Andreas Kuckartz
      </dd>
      <dt>Participate:</dt><dd>
    <a href="https://github.com/w3c/rdf-star/">GitHub w3c/rdf-star</a>
  </dd><dd>
    <a href="https://github.com/w3c/rdf-star/issues/">File a bug</a>
  </dd><dd>
    <a href="https://github.com/w3c/rdf-star/commits/main">Commit history</a>
  </dd><dd>
    <a href="https://github.com/w3c/rdf-star/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    <p class="copyright">
          <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
          ©
          2021
          
          the Contributors to the RDF-star and SPARQL-star
          Specification, published by the
          <a href="https://www.w3.org/community/rdf-dev/">RDF-DEV Community Group</a> under the
          <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable
                <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a>
                is available.
              
        </p>
    <hr title="Separator for header">
  </div>
  <section id="abstract" class="introductory"><h2>Abstract</h2>
    <p>TODO</p>
  </section>
  <section id="sotd" class="introductory"><h2>Status of This Document</h2><p>
      This specification was published by the
      <a href="https://www.w3.org/community/rdf-dev/">RDF-DEV Community Group</a>. It is not a W3C Standard nor is it
      on the W3C Standards Track.
      
            Please note that under the
            <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>
            there is a limited opt-out and other conditions apply.
          
      Learn more about
      <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>.
    </p>
  <p>
    <a href="https://github.com/w3c/rdf-star/issues/">GitHub Issues</a> are preferred for
          discussion of this specification.
        
    
  </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#background-and-motivation"><bdi class="secno">1.1 </bdi>Background and Motivation</a></li><li class="tocline"><a class="tocxref" href="#overview"><bdi class="secno">1.2 </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">1.3 </bdi>Conformance</a></li></ol></li><li class="tocline"><a class="tocxref" href="#concepts"><bdi class="secno">2. </bdi>Concepts and Abstract Syntax</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#occurrences"><bdi class="secno">2.1 </bdi>Triples and occurrences</a></li></ol></li><li class="tocline"><a class="tocxref" href="#concrete-syntaxes"><bdi class="secno">3. </bdi>Concrete Syntaxes</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#turtle-star"><bdi class="secno">3.1 </bdi>Turtle-star</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#turtle-star-grammar"><bdi class="secno">3.1.1 </bdi>Grammar</a></li><li class="tocline"><a class="tocxref" href="#parsing"><bdi class="secno">3.1.2 </bdi>Parsing</a></li></ol></li><li class="tocline"><a class="tocxref" href="#n-triples-star"><bdi class="secno">3.2 </bdi>N-Triples-star</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#n-triples-star-grammar"><bdi class="secno">3.2.1 </bdi>Grammar</a></li><li class="tocline"><a class="tocxref" href="#n-triples-star-parsing"><bdi class="secno">3.2.2 </bdi>Parsing</a></li></ol></li><li class="tocline"><a class="tocxref" href="#n-quads-star"><bdi class="secno">3.3 </bdi>N-Quads-star</a></li><li class="tocline"><a class="tocxref" href="#other-concrete-syntaxes"><bdi class="secno">3.4 </bdi>Other Concrete Syntaxes</a></li></ol></li><li class="tocline"><a class="tocxref" href="#sparql-star-query-language"><bdi class="secno">4. </bdi>SPARQL-star Query Language</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#initial-definitions"><bdi class="secno">4.1 </bdi>Initial Definitions</a></li><li class="tocline"><a class="tocxref" href="#sparql-star-grammar"><bdi class="secno">4.2 </bdi>Grammar</a></li><li class="tocline"><a class="tocxref" href="#translation-to-the-algebra"><bdi class="secno">4.3 </bdi>Translation to the Algebra</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#variable-scope"><bdi class="secno">4.3.1 </bdi>Variable Scope</a></li><li class="tocline"><a class="tocxref" href="#expand-syntax-forms"><bdi class="secno">4.3.2 </bdi>Expand Syntax Forms</a></li><li class="tocline"><a class="tocxref" href="#translate-property-path-patterns"><bdi class="secno">4.3.3 </bdi>Translate Property Path Patterns</a></li><li class="tocline"><a class="tocxref" href="#translate-bgp"><bdi class="secno">4.3.4 </bdi>Translate Basic Graph Patterns</a></li><li class="tocline"><a class="tocxref" href="#translate-bind"><bdi class="secno">4.3.5 </bdi>Translate BIND Clauses with an Embedded Triple Pattern</a></li></ol></li><li class="tocline"><a class="tocxref" href="#evaluation-semantics"><bdi class="secno">4.4 </bdi>Evaluation Semantics</a></li><li class="tocline"><a class="tocxref" href="#query-result-formats"><bdi class="secno">4.5 </bdi>Query Result Formats</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sparql-star-query-results-json-format"><bdi class="secno">4.5.1 </bdi>SPARQL-star Query Results JSON Format</a></li><li class="tocline"><a class="tocxref" href="#sparql-star-query-results-xml-format"><bdi class="secno">4.5.2 </bdi>SPARQL-star Query Results XML Format</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#sparql-star-update"><bdi class="secno">5. </bdi>SPARQL-star Update</a></li><li class="tocline"><a class="tocxref" href="#rdf-star-semantics"><bdi class="secno">6. </bdi>RDF-star Semantics</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#mapping"><bdi class="secno">6.1 </bdi>Mapping RDF-star abstract syntax to RDF</a></li><li class="tocline"><a class="tocxref" href="#entailment-of-rdf-star-graphs"><bdi class="secno">6.2 </bdi>Entailment of <span class="formerLink" data-link-type="dfn">RDF-star graphs</span></a></li><li class="tocline"><a class="tocxref" href="#remarks"><bdi class="secno">6.3 </bdi>Remarks</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#combining-rdf-star-graphs"><bdi class="secno">6.3.1 </bdi>Combining RDF-star graphs</a></li><li class="tocline"><a class="tocxref" href="#considerations-on-interoperability"><bdi class="secno">6.3.2 </bdi>Considerations on interoperability</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#historical-remarks"><bdi class="secno">A. </bdi>Historical remarks</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#sa-mode-and-pg-mode"><bdi class="secno">A.1 </bdi>SA-mode and PG-mode</a></li><li class="tocline"><a class="tocxref" href="#the-seminal-example"><bdi class="secno">A.2 </bdi>The seminal example</a></li></ol></li><li class="tocline"><a class="tocxref" href="#issue-summary"><bdi class="secno">B. </bdi>Issue Summary</a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">C. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">C.2 </bdi>Informative references</a></li></ol></li></ol></nav>

  <section id="introduction">
    <h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction<a class="self-link" aria-label="§" href="#introduction"></a></h2>

    <section class="informative" id="background-and-motivation">
      <h3 id="x1-1-background-and-motivation"><bdi class="secno">1.1 </bdi>Background and Motivation<a class="self-link" aria-label="§" href="#background-and-motivation"></a></h3><p><em>This section is non-normative.</em></p>

      <p>TODO, citing&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf-star-foundation" title="Foundations of RDF* and SPARQL* - An Alternative Approach to Statement-Level Metadata in RDF.">RDF-STAR-FOUNDATION</a></cite>]</p>
    </section>

    <section class="informative" id="overview">
      <h3 id="x1-2-overview"><bdi class="secno">1.2 </bdi>Overview<a class="self-link" aria-label="§" href="#overview"></a></h3><p><em>This section is non-normative.</em></p>

<p>The RDF data model lets you state facts in three-part subject-predicate-object statements known as triples. For example, with a single RDF triple you can say that employee38 has a familyName of "Smith". A triple's predicate is a property specified with an IRI (an Internationalized version of a URI) to identify the namespace of the property name. A triple's subject and object can each be an IRI referencing any entity, and the object can also be a literal value such as "Smith" or data of other types such as dates, numbers, or Boolean values. </p>

<p>The subject and object of a triple can themselves reference triples. In the statement "employee22 claims that employee38 has a jobTitle of 'Assistant Designer'", the object of the triple that has employee22 as its subject references the statement "employee38 has a jobTitle of 'Assistant Designer'". This use of a triple as the subject or object resource of another triple so that we can say things about that triple is known as <a href="https://www.w3.org/TR/rdf11-mt/#reification">reification</a>. </p>
<p>The concept of reification has always been part of RDF, but expressing it in RDF concrete syntaxes such as Turtle, N-Triples, and RDF/XML has been verbose and cumbersome. This specification describes a new, more compact conceptual data model and Turtle concrete syntax for reification known as RDF-star and Turtle-star, respectively. This model and syntax enable the creation of concise triples that reference other triples as subject and object resources.</p>

<p>Triples that include a triple as a subject or an object are known as RDF-star triples. The following dataset shows the example RDF-star triples from above using the Turtle-star syntax, which uses double angle brackets to enclose a triple serving as a subject or object resource:</p>

      <div class="example" id="example-1">
        <div class="marker">
    <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
  </div> <pre data-content-type="text/x-turtle-star" class="nohighlight">@prefix :    &lt;http://www.example.org/&gt; .

:employee38 :familyName "Smith" .
:employee22 :claims &lt;&lt; :employee38 :jobTitle "Assistant Designer" &gt;&gt; .</pre>
      </div>

<p>After declaring a prefix so that IRIs can be abbreviated, the first triple in this example asserts that employee38 has a familyName of "Smith". Note that this dataset does not assert that employee38 has a jobTitle of "Assistant Designer"; it says that employee22 has made that claim. In other words, the triple "employee38 has a jobTitle of 'Assistant Designer'" is not what we call an asserted triple, like "employee38 has a familyName of 'Smith'" above; it is known as an embedded triple. (If we added the triple <code>:employee38 :jobTitle "Assistant Designer"</code> below the triple about employee22's claim in the example above, then this triple about employee38's jobTitle would be both an embedded triple and an asserted one.) </p>

<p>This specification also describes an extension to the SPARQL Protocol and Query Language known as SPARQL-star for the querying of RDF-star triples. For example, the following SPARQL-star query asks "who has made any claims about employee38?"</p>

<div class="example" id="example-2">
        <div class="marker">
    <a class="self-link" href="#example-2">Example<bdi> 2</bdi></a>
  </div> <pre data-content-type="application/x-sparql-star-query" class="nohighlight">PREFIX : &lt;http://www.example.org/&gt; 

SELECT ?claimer WHERE {
   ?claimer :claims &lt;&lt; :employee38 ?property ?value &gt;&gt;
}</pre>
      </div>


<p> SPARQL query triple patterns that include a triple pattern as a subject or object are known as SPARQL-star triple patterns. </p>

<div class="issue" id="issue-container-number-93"><div role="heading" class="issue-title marker" id="h-issue" aria-level="4"><a href="https://github.com/w3c/rdf-star/issues/93"><span class="issue-number">Issue 93</span></a><span class="issue-label">: annotation-syntax example in the overview/primer part</span></div><p>The overview/primer part of the report should also contain an example that highlights the availability of the annotation syntax (not only on the data-level but also on the query-level).</p></div>

<div class="issue" id="issue-container-number-94"><div role="heading" class="issue-title marker" id="h-issue-0" aria-level="4"><a href="https://github.com/w3c/rdf-star/issues/94"><span class="issue-number">Issue 94</span></a><span class="issue-label">: SPARQL-star update example in the overview/primer part</span></div><p>The overview/primer part of the report should also contain an example that hints at the fact that the spec also covers updates.</p></div>

<p>For the remainder of this document, examples will assume that the following prefixes have been declared to represent the IRIs shown with them here: </p>

<table>
<tbody><tr><td><code>:</code></td><td><code>&lt;http://www.example.org/&gt;</code></td></tr>
<tr><td><code>rdfs:</code></td><td><code>&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</code></td></tr>
<tr><td><code>owl:</code></td><td><code>&lt;http://www.w3.org/2002/07/owl#&gt;</code></td></tr>
<tr><td><code>prov:</code></td><td><code>&lt;http://www.w3.org/ns/prov#&gt;</code></td></tr>
<tr><td><code>dc:</code></td><td><code>&lt;http://purl.org/dc/elements/1.1/&gt;</code></td></tr>
<tr><td><code>dct:</code></td><td><code>&lt;http://purl.org/dc/terms/&gt;</code></td></tr>
</tbody></table>

    </section>

    <section id="conformance"><h3 id="x1-3-conformance"><bdi class="secno">1.3 </bdi>Conformance<a class="self-link" aria-label="§" href="#conformance"></a></h3><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em class="rfc2119">MUST NOT</em> in this document
        are to be interpreted as described in
        <a href="https://tools.ietf.org/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p>
      <div class="issue" id="issue-container-number-3"><div role="heading" class="issue-title marker" id="h-issue-1" aria-level="4"><a href="https://github.com/w3c/rdf-star/issues/3"><span class="issue-number">Issue 3</span></a><span class="issue-label" aria-label="This issue is labelled as later and process.">: Do we need more things in the 'conformance' section? <a class="respec-gh-label" style="background-color: rgb(170, 170, 170); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22later%22">later</a><a class="respec-gh-label" style="background-color: rgb(191, 212, 242); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22process%22">process</a></span></div><p>For the moment, we only have the boilerplate text generated by respec.</p></div>
    </section>

  </section>

  <section id="concepts">
    <h2 id="x2-concepts-and-abstract-syntax"><bdi class="secno">2. </bdi>Concepts and Abstract Syntax<a class="self-link" aria-label="§" href="#concepts"></a></h2>

    <p>In the following, we introduce a number of definitions specific to SPARQL-star, which rely on the following notions (extending some of them) defined in <cite><a href="https://www.w3.org/TR/rdf11-concepts/">RDF 1.1 Concepts and Abstract Syntax</a></cite>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>]:
    <dfn data-plurals="blank nodes" id="dfn-blank-node" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a></dfn>,
    <dfn id="dfn-default-graph" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph">default graph</a></dfn>,
    <dfn data-plurals="graph names" id="dfn-graph-name" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name">graph name</a></dfn>,
    <dfn data-plurals="iris" id="dfn-iri" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a></dfn>,
    <dfn data-plurals="literals" id="dfn-literal" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a></dfn>,
    <dfn data-plurals="named graph" id="dfn-named-graphs" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graphs</a></dfn>,
    <dfn id="dfn-object" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a></dfn>,
    <dfn id="dfn-predicate" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a></dfn>,
    <dfn id="dfn-rdf-dataset" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF dataset</a></dfn>,
    <dfn data-plurals="rdf graphs" id="dfn-rdf-graph" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a></dfn>,
    <dfn data-plurals="rdf triples" id="dfn-rdf-triple" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">RDF triple</a></dfn>,
    and <dfn id="dfn-subject" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a></dfn>
    </p>

    <p>An <dfn data-lt="graph|RDF-star graph" data-plurals="rdf-star graphs" id="dfn-graph">RDF-star graph</dfn> is a set of <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-1">RDF-star triples</a>.</p>

    <p>An <dfn data-lt="triple|RDF-star triple" data-plurals="rdf-star triples" id="dfn-triple">RDF-star triple</dfn> is a 3-tuple defined recursively as follows:</p>
    <ul>
      <li>any <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">RDF triple</a> is an <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-2">RDF-star triple</a>;</li>
      <li>if <var>t</var> and <var>t'</var> are <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-3">RDF-star triples</a>, <var>s</var> is an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a> or a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a>, <var>p</var> is an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a>, <var>o</var> is an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> or a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a>, then (<var>t</var>, <var>p</var>, <var>o</var>), (<var>s</var>, <var>p</var>, <var>t</var>) and (<var>t</var>, <var>p</var>, <var>t'</var>) are <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-4">RDF-star triples</a>.</li>
    </ul>

    <p>As for <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple">RDF triples</a>, we call the 3 components of an <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-5">RDF-star triple</a> its <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a> and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a>, respectively. From the definitions above, it follows that any <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a> is also an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-1">RDF-star graph</a>. Note also that, by definition, an RDF-star triple cannot contain itself and cannot be nested infinitely.</p>

    <p><a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRIs</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literals</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank nodes</a> and <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-6">RDF-star triples</a> are collectively known as <dfn data-plurals="rdf-star term" id="dfn-rdf-star-terms">RDF-star terms</dfn>.</p>

    <p>For every <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-7">RDF-star triple</a> <var>t</var>, we define its <dfn data-lt="constituent|constituent terms" data-plurals="constituents" id="dfn-constituent">constituent terms</dfn> (or simply constituents) as the set containing its <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a>, its <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate">predicate</a>, its <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a>, plus all the <a href="#dfn-constituent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-constituent-1">constituent terms</a> of its <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> and/or its <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> if they are themselves <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-8">RDF-star triples</a>. By extension, we define the <a href="#dfn-constituent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-constituent-2">constituent terms</a> of an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-2">RDF-star graph</a> to be the union set of the <a href="#dfn-constituent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-constituent-3">constituent terms</a> of all its triples.</p>

    <div class="example">
      Consider the following <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-9">RDF-star triple</a> (represented in Turtle-star):
      <div class="example" id="example-3">
        <div class="marker">
    <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
  </div> <pre data-content-type="text/x-turtle-star" class="nohighlight">&lt;&lt; _:a :name "Alice" &gt;&gt; :statedBy :bob.</pre>
      </div>
      Its set of <a href="#dfn-constituent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-constituent-4">constituent terms</a> comprises the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRIs</a> <code>:name</code>, <code>:statedBy</code>, <code>:bob</code>, the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> <code>_:a</code>, the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a> <code>"Alice"</code>, and the <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-10">triple</a> <code>&lt;&lt; _:a :name "Alice" &gt;&gt;</code>.
    </div>

    <p>An <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-11">RDF-star triple</a> used as the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> of another <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-12">RDF-star triple</a> is called an <dfn data-lt="embedded|embedded triple" data-plurals="embedded triples" id="dfn-embedded">embedded triple</dfn>. An <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-13">RDF-star triple</a> that is an element of an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-3">RDF-star graph</a> is called an <dfn data-lt="asserted|asserted triple" data-plurals="asserted triples" id="dfn-asserted">asserted triple</dfn>. Note that, in a given <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-4">RDF-star graph</a>, the same <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-14">triple</a> <em class="rfc2119">MAY</em> be both <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-1">embedded</a> and <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-1">asserted</a>.</p>

    <p>An <dfn data-lt="dataset|RDF-star dataset" id="dfn-dataset">RDF-star dataset</dfn> is a collection of <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-5">RDF-star graphs</a>, and comprises:</p>

    <ul>
      <li>Exactly one <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph">default graph</a>, being an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-6">RDF-star graph</a>. The <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph">default graph</a> does not have a name and <em class="rfc2119">MAY</em> be empty.</li>
      <li>Zero or more <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graphs</a>. Each <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graph</a> is a pair consisting of either an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a> or a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a> (called the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name">graph name</a>), and an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-7">RDF-star graph</a>. <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name">Graph names</a> are unique within an <a href="#dfn-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataset-1">RDF-star dataset</a>.</li>
    </ul>

    <p>Again, this definition is an extension of the notion of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF dataset</a>, hence it follows that any <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset">RDF dataset</a> is also an <a href="#dfn-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataset-2">RDF-star dataset</a>.</p>

    <section class="informative" id="occurrences">
      <h3 id="x2-1-triples-and-occurrences"><bdi class="secno">2.1 </bdi>Triples and occurrences<a class="self-link" aria-label="§" href="#occurrences"></a></h3><p><em>This section is non-normative.</em></p>

      <p>According to the definitions above, an <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-15">RDF-star triple</a> is an abstract entity whose identity is entirely defined by its subject, predicate and object. Conversely, given three <a href="#dfn-rdf-star-terms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdf-star-terms-1">RDF-star terms</a> <var>s</var>, <var>p</var>, and <var>o</var>, there is exactly and only one <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-16">RDF-star triple</a> with subject <var>s</var>, predicate <var>p</var> and object <var>o</var>. This unique triple (<var>s</var>, <var>p</var>, <var>o</var>) can be <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-2">embedded</a> as the subject or object of multiple other triples, but must be assumed to represent the <em>same thing</em> everywhere it occurs, just like the same IRI <var>p</var> is assumed to represent the same thing everywhere it occurs.</p>

      <p>In some situations, however, it might be necessary to distinguish the <em>occurrences</em> of a triple in different graphs. Consider the following sentence: "The triple <code>&lt;http://example.org/s&gt; &lt;http://example.org/p&gt; &lt;http://example.org/o&gt;</code> in (the graph represented by) file1.ttl was added by Alice, and the same triple in file2.ttl was added by Bob." Note that the words "same triple" in this sentence may be confusing, because although the triple (as an abstract entity) is the same, its respective occurrences are different things, each within a different file and with a different author (this is known, in philosophy and linguistics, as the <a href="https://en.wikipedia.org/wiki/Type%E2%80%93token_distinction">type-token distinction</a>). As the embedded triple represents a unique thing, adequately conveying the meaning of the sentence above requires additional nodes for representing the two distinct occurrences. One possible solution is illustrated in the following example (using the Turtle-star concrete syntax described in <a href="#turtle-star">the next section</a>).</p>

      <div class="example" id="occurrences-example">
        <div class="marker">
    <a class="self-link" href="#occurrences-example">Example<bdi> 4</bdi></a>
  </div> <pre data-content-type="text/x-turtle-star" class="nohighlight">_:a :occurenceOf &lt;&lt; :s :p :o &gt;&gt; ;
    :in &lt;file1.ttl&gt; ;
    dct:creator :alice.
_:b :occurenceOf &lt;&lt; :s :p :o &gt;&gt; ;
    :in &lt;file2.ttl&gt; ;
    dct:creator :bob.</pre>
      </div>

    </section>

  </section>

  <section id="concrete-syntaxes">
  <h2 id="x3-concrete-syntaxes"><bdi class="secno">3. </bdi>Concrete Syntaxes<a class="self-link" aria-label="§" href="#concrete-syntaxes"></a></h2>
    <section id="turtle-star">
    <h3 id="x3-1-turtle-star"><bdi class="secno">3.1 </bdi>Turtle-star<a class="self-link" aria-label="§" href="#turtle-star"></a></h3>
    <p>In this section, we present Turtle-star, an extension of the Turtle format&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-turtle" title="RDF 1.1 Turtle">TURTLE</a></cite>] allowing the representation of <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-8">RDF-star graphs</a>. For the sake of conciseness, we only describe here the differences between Turtle-star and Turtle.</p>

    <section id="turtle-star-grammar">
      <h4 id="x3-1-1-grammar"><bdi class="secno">3.1.1 </bdi>Grammar<a class="self-link" aria-label="§" href="#turtle-star-grammar"></a></h4>
      <p>Turtle-star is defined to follow the <a href="https://www.w3.org/TR/turtle/#h3_sec-grammar-grammar">same grammar</a> as Turtle, <em>except</em> for the <a href="https://www.w3.org/TR/xml/#sec-notation"><abbr title="Extended Backus-Naur Form">EBNF</abbr> productions</a> specified below, which replace the productions having the same number (if any) in the original grammar.</p>

      <table class="grammar">
        <tbody><tr id="grammar-production-objectList">
          <td>[8]</td>
          <td><code>objectList</code></td>
          <td>::=</td>
          <td>
            <a href="#grammar-production-object">object</a>
            <a href="#grammar-production-annotation">annotation</a><code>?</code>
            <code>(</code>
            <code class="grammar-literal">','</code>
            <a href="#grammar-production-object">object</a>
            <a href="#grammar-production-annotation">annotation</a><code>?</code>
            <code>)*</code>
          </td>
        </tr>
        <tr id="grammar-production-subject">
          <td>[10]</td>
          <td><code>subject</code></td>
          <td>::=</td>
          <td>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-iri">iri</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-BlankNode">BlankNode</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-collection">collection</a> <code>|</code>
            <a href="#grammar-production-embTriple">embTriple</a>
          </td>
        </tr>
        <tr id="grammar-production-object">
          <td>[12]</td>
          <td><code>object</code></td>
          <td>::=</td>
          <td>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-iri">iri</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-BlankNode">BlankNode</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-collection">collection</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-blankNodePropertyList">blankNodePropertyList</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-literal">literal</a> <code>|</code>
            <a href="#grammar-production-embTriple">embTriple</a>
          </td>
        </tr>
        <tr id="grammar-production-embTriple">
          <td>[27]</td>
          <td><code>embTriple</code></td>
          <td>::=</td>
          <td>
            <code class="grammar-literal">'&lt;&lt;'</code>
            <a href="#grammar-production-embSubject">embSubject</a>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-verb">verb</a>
            <a href="#grammar-production-embObject">embObject</a>
            <code class="grammar-literal">'&gt;&gt;'</code>
          </td>
        </tr>
        <tr id="grammar-production-embSubject">
          <td>[28]</td>
          <td><code>embSubject</code></td>
          <td>::=</td>
          <td>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-iri">iri</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-BlankNode">BlankNode</a> <code>|</code>
            <a href="#grammar-production-embTriple">embTriple</a>
          </td>
        </tr>
        <tr id="grammar-production-embObject">
          <td>[29]</td>
          <td><code>embObject</code></td>
          <td>::=</td>
          <td>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-iri">iri</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-BlankNode">BlankNode</a> <code>|</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-literal">literal</a> <code>|</code>
            <a href="#grammar-production-embTriple">embTriple</a>
          </td>
        </tr>
        <tr id="grammar-production-annotation">
          <td>[31]</td>
          <td><code>annotation</code></td>
          <td>::=</td>
          <td>
            <code class="grammar-literal">'{|'</code>
            <a href="https://www.w3.org/TR/turtle/#grammar-production-predicateObjectList">predicateObjectList</a>
            <code class="grammar-literal">'|}'</code>
          </td>
        </tr>
      </tbody></table>

      <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="5"><span>Note</span></div><p class="">The changes are that <a href="#grammar-production-subject"><code>subject</code></a> and <a href="#grammar-production-object"><code>object</code></a> productions have been extended to accept <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-3">embedded triples</a>, which are described by the new productions <a href="#grammar-production-embTriple">27</a> to <a href="#grammar-production-embObject">29</a>. Note that <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-4">embedded triples</a> accept a more restricted range of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> expressions than <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-2">asserted triples</a>. Additionally, the <a href="#grammar-production-objectList"><code>objectList</code></a> production now accepts an optional <a href="#grammar-production-annotation">annotation</a> after each object.</p></div>
    </section>

    <section id="parsing">
      <h4 id="x3-1-2-parsing"><bdi class="secno">3.1.2 </bdi>Parsing<a class="self-link" aria-label="§" href="#parsing"></a></h4>
      <p>A Turtle-star parser is similar to a Turtle parser as defined in <a href="https://www.w3.org/TR/turtle/#h2_sec-parsing">Section&nbsp;7 of the Turtle specification</a>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-turtle" title="RDF 1.1 Turtle">TURTLE</a></cite>], with an additional item in its state&nbsp;:</p>
      <ul>
        <li id="curObject"><a href="#dfn-rdf-star-terms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdf-star-terms-2">RDF-star Term</a> <var>curObject</var> — The <var>curObject</var> is bound to the <a href="#grammar-production-embObject"><code>embObject</code></a> production.</li>
      </ul>
      <p>Additionally, the <a href="https://www.w3.org/TR/turtle/#curSubject"><var>curSubject</var></a> can be bound to any <a href="#dfn-rdf-star-terms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdf-star-terms-3">RDF-star term</a> (including an <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-5">embedded triple</a>).</p>

      <p>A Turtle-star document defines an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-9">RDF-star graph</a> composed of a set of <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-17">RDF-star triples</a>. The <a href="#grammar-production-subject"><code>subject</code></a> and <a href="#grammar-production-embSubject"><code>embSubject</code></a> productions set the <var>curSubject</var>. The <a href="https://www.w3.org/TR/turtle/#grammar-production-verb"><code>verb</code></a> production sets the <a href="https://www.w3.org/TR/turtle/#curPredicate"><var>curPredicate</var></a>. The <a href="#grammar-production-object"><code>object</code></a> and <a href="#grammar-production-embObject"><code>embObject</code></a> productions set the <var>curObject</var>. Finishing the <a href="#grammar-production-object"><code>object</code></a> production, an <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-18">RDF-star triple</a> <var>curSubject</var> <var>curPredicate</var> <var>curObject</var> is generated and added to the <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-10">RDF-star graph</a>.</p>

      <p>Beginning the <a href="#grammar-production-embTriple"><code>embTriple</code></a> production records the <var>curSubject</var> and <var>curPredicate</var>. Finishing the <a href="#grammar-production-embTriple"><code>embTriple</code></a> production yields the <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-19">RDF-star triple</a> <var>curSubject</var> <var>curPredicate</var> <var>curObject</var> and restores the recorded values of <var>curSubject</var> and <var>curPredicate</var>.</p>

      <p>Beginning the <a href="#grammar-production-annotation"><code>annotation</code></a> production records the <var>curSubject</var> and <var>curPredicate</var>, and sets the <var>curSubject</var> to the <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-20">RDF-star triple</a> <var>curSubject</var> <var>curPredicate</var> <var>curObject</var>. Finishing the <a href="#grammar-production-annotation"><code>annotation</code></a> production restores the recorded values of <var>curSubject</var> and <var>curPredicate</var>.</p>

      <p>All other productions <em class="rfc2119">MUST</em> be handled as specified by <a href="https://www.w3.org/TR/turtle/#h2_sec-parsing">Section&nbsp;7 of the Turtle specification</a>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-turtle" title="RDF 1.1 Turtle">TURTLE</a></cite>], while still applying the changes above recursively.</p>
    </section>
  </section>

    <section id="n-triples-star">
    <h3 id="x3-2-n-triples-star"><bdi class="secno">3.2 </bdi>N-Triples-star<a class="self-link" aria-label="§" href="#n-triples-star"></a></h3>

    <p>This section describes N-Triples-star, a minimal extension of the N-Triples format [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-triples" title="RDF 1.1 N-Triples">N-TRIPLES</a></cite>] allowing a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject">subject</a> or an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object">object</a> of an <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-21">RDF-star triple</a> to be an <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-6">embedded triple</a>.</p>

    <section id="n-triples-star-grammar">
      <h4 id="x3-2-1-grammar"><bdi class="secno">3.2.1 </bdi>Grammar<a class="self-link" aria-label="§" href="#n-triples-star-grammar"></a></h4>
      <p>N-Triples-star is defined to follow the same grammar as the <a href="https://www.w3.org/TR/n-triples/#n-triples-grammar">N-Triples Grammar</a>, except for the <abbr title="Extended Backus-Naur Form">EBNF</abbr> productions specified below, which replace the productions having the same number (if any) in the original grammar.</p>

      <table class="n-triples-star-ebnf">
        <tbody id="grammar-productions" class="ebnf">
          <tr id="grammar-production-nt-subject">
            <td>[3]</td>
            <td><code>subject</code></td>
            <td>::=</td>
            <td><a href="https://www.w3.org/TR/n-triples/#grammar-production-IRIREF">IRIREF</a> <code>|</code> <a href="https://www.w3.org/TR/n-triples/#grammar-production-BLANK_NODE_LABEL">BLANK_NODE_LABEL</a> <code>|</code> <a href="#grammar-production-nt-embTriple">embTriple</a></td>
          </tr>
          <tr id="grammar-production-nt-object">
            <td>[5]</td>
            <td><code>object</code></td>
            <td>::=</td>
            <td><a href="https://www.w3.org/TR/n-triples/#grammar-production-IRIREF">IRIREF</a> <code>|</code> <a href="https://www.w3.org/TR/n-triples/#grammar-production-BLANK_NODE_LABEL">BLANK_NODE_LABEL</a> <code>|</code> <a href="https://www.w3.org/TR/n-triples/#grammar-production-literal">literal</a> <code>|</code> <a href="#grammar-production-nt-embTriple">embTriple</a></td>
          </tr>
          <tr id="grammar-production-nt-embTriple">
            <td>[7]</td>
            <td><code>embTriple</code></td>
            <td>::=</td>
            <td>"&lt;&lt;" <a href="#grammar-production-nt-subject">subject</a> <a href="https://www.w3.org/TR/n-triples/#grammar-production-predicate">predicate</a> <a href="#grammar-production-nt-object">object</a> "&gt;&gt;"</td>
          </tr>
        </tbody>
      </table>

      <div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="5"><span>Note</span></div><p class="">As with Turtle-star, the changes are that <a href="#grammar-production-nt-subject"><code>subject</code></a> and <a href="#grammar-production-nt-object"><code>object</code></a> productions have been extended to accept <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-7">embedded triples</a>, which are described by the new production <a href="#grammar-production-nt-embTriple">7</a>. N-Triples-star does not include an <a href="#grammar-production-annotation">annotation</a> form.</p></div>
    </section>

    <section id="n-triples-star-parsing">
      <h4 id="x3-2-2-parsing"><bdi class="secno">3.2.2 </bdi>Parsing<a class="self-link" aria-label="§" href="#n-triples-star-parsing"></a></h4>
      <p>In contrast to [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-triples" title="RDF 1.1 N-Triples">N-TRIPLES</a></cite>], N-Triples-star allows recursion on the <a href="#grammar-production-nt-subject"><code>subject</code></a> and <a href="#grammar-production-nt-object"><code>object</code></a> productions.</p>

      <p>An N-Triples-star document defines an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-11">RDF-star graph</a> composed of a set of <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-22">RDF-star triples</a>. The <a href="N-TRIPLES#grammar-production-triple"><code>triple</code></a> production produces an <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-23">RDF-star triple</a> composed of a <a href="#grammar-production-nt-subject"><code>subject</code></a>, <a href="https://www.w3.org/TR/n-triples/#grammar-production-predicate"><code>predicate</code></a> and <a href="#grammar-production-nt-object"><code>object</code></a>.</p>

      <p>In addition to the <a href="https://www.w3.org/TR/n-triples/#sec-parsing-terms">Term Constructors</a> defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-triples" title="RDF 1.1 N-Triples">N-TRIPLES</a></cite>], an additional constructor is defined for <a href="#grammar-production-nt-embTriple"><code>embTriple</code></a> of type <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-24">RDF-star triple</a> defined by the terms constructed for <a href="#grammar-production-nt-subject"><code>subject</code></a>, <a href="https://www.w3.org/TR/n-triples/#grammar-production-predicate"><code>predicate</code></a> and <a href="#grammar-production-nt-object"><code>object</code></a>.</p>

    <p>All other productions <em class="rfc2119">MUST</em> be handled as specified by <a href="https://www.w3.org/TR/n-triples/#sec-parsing-terms">Section&nbsp;8.1 of the N-Triples specification</a>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-n-triples" title="RDF 1.1 N-Triples">N-TRIPLES</a></cite>], while still applying the changes above recursively.</p>
    </section>
    </section>

    <section id="n-quads-star">
    <h3 id="x3-3-n-quads-star"><bdi class="secno">3.3 </bdi>N-Quads-star<a class="self-link" aria-label="§" href="#n-quads-star"></a></h3>

    <p>The [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-QUADS</a></cite>] format is extended to describe the N-Quads-star format using the same production updates described in the <a href="#n-triples-star-grammar">N-Triples-star Grammar</a>.</p>

    <div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div><p class="">As RDF-star describes <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-8">embedded triples</a> and not embedded quads, the <a href="https://www.w3.org/TR/n-quads/#grammar-production-graphLabel"><code>graphLabel</code></a> component of an N-Quads <a href="https://www.w3.org/TR/n-quads/#grammar-production-statement"><code>statement</code></a> does not apply to the <a href="#grammar-production-nt-embTriple"><code>embTriple</code></a> component.</p></div>

    <p>An N-Quads-star document defines an <a href="#dfn-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataset-3">RDF-star dataset</a> composed of
      a single <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph">default graph</a>, and zero or more <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graphs</a>,
      all of which are <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-12">RDF-star graphs</a>.</p>

    <p>A conforming N-Quads-star parser <em class="rfc2119">MUST</em> parse any valid
      <strong>N-Quads document</strong> and additionally parse the 
      <a href="#grammar-production-nt-subject"><code>subject</code></a> and 
      <a href="#grammar-production-nt-object"><code>object</code></a> productions
      from N-Triples-star to generate <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-25">RDF-star triples</a> which are
      added to either the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph">default graph</a> or associated
      <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-named-graph">named graph</a>, as appropriate.</p>
  </section>

    <section class="informative" id="other-concrete-syntaxes">
      <h3 id="x3-4-other-concrete-syntaxes"><bdi class="secno">3.4 </bdi>Other Concrete Syntaxes<a class="self-link" aria-label="§" href="#other-concrete-syntaxes"></a></h3><p><em>This section is non-normative.</em></p>

      <p>While this document specifies a small number of concrete syntaxes, nothing prevents other concrete syntaxes of RDF-star from being proposed. In particular, other existing concrete syntaxes for RDF, such as RDF/XML&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf-syntax-grammar" title="RDF 1.1 XML Syntax">RDF-SYNTAX-GRAMMAR</a></cite>], could be extended to support RDF-star.</p>
    </section>

  </section>

  <section id="sparql-star-query-language">
    <h2 id="x4-sparql-star-query-language"><bdi class="secno">4. </bdi>SPARQL-star Query Language<a class="self-link" aria-label="§" href="#sparql-star-query-language"></a></h2>

    <p>This Section&nbsp;introduces SPARQL-star, which is an RDF-star-aware extension of the RDF query language SPARQL&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-sparql11-query" title="SPARQL 1.1 Query Language">SPARQL11-QUERY</a></cite>]; i.e., SPARQL-star can be used to query RDF-star graphs.</p>

    <section id="initial-definitions">
      <h3 id="x4-1-initial-definitions"><bdi class="secno">4.1 </bdi>Initial Definitions<a class="self-link" aria-label="§" href="#initial-definitions"></a></h3>

      <p>In the following, we introduce a number of SPARQL-star-specific definitions, which rely on the following notions, defined in <cite><a href="https://www.w3.org/TR/sparql11-query/">SPARQL 1.1 Query Language</a></cite>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-sparql11-query" title="SPARQL 1.1 Query Language">SPARQL11-QUERY</a></cite>]: <dfn id="dfn-rdf-term" data-no-export=""><a href="https://www.w3.org/TR/sparql11-query/#defn_RDFTerm">RDF term</a></dfn>, <dfn data-lt="variable|query variable" data-plurals="query variables|variables" id="dfn-variable" data-no-export=""><a href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">query variable</a></dfn>, <dfn data-plurals="triple patterns" id="dfn-triple-pattern" data-no-export=""><a href="https://www.w3.org/TR/sparql11-query/#defn_TriplePattern">triple pattern</a></dfn>,
      <dfn data-plurals="property path patterns" id="dfn-property-path-pattern" data-no-export=""><a href="https://www.w3.org/TR/sparql11-query/#defn_PropertyPathPattern">property path pattern</a></dfn>,
      <dfn id="dfn-property-path-expression" data-no-export=""><a href="https://www.w3.org/TR/sparql11-query/#defn_PropertyPathExpr">property path expression</a></dfn>,
      and <dfn data-plurals="solution mappings" id="dfn-solution-mapping" data-no-export=""><a href="https://www.w3.org/TR/sparql11-query/#defn_sparqlSolutionMapping">solution mapping</a></dfn>.</p>

      <p>A <dfn data-lt="triple-star-pattern|SPARQL-star triple pattern" data-plurals="sparql-star triple patterns" id="dfn-triple-star-pattern">SPARQL-star triple pattern</dfn> is a 3-tuple that is defined recursively as follows:</p>
      <ol>
        <li>Every SPARQL <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_TriplePattern">triple pattern</a> is a SPARQL-star triple pattern;
        </li><li>If <var>t</var> and <var>t'</var> are SPARQL-star triple patterns, <var>x</var> is an <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_RDFTerm">RDF term</a> or a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">query variable</a>, and <var>p</var> is an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a> or a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">query variable</a>, then (<var>t</var>,&nbsp;<var>p</var>,&nbsp;<var>x</var>), (<var>x</var>,&nbsp;<var>p</var>,&nbsp;<var>t</var>), and (<var>t</var>,&nbsp;<var>p</var>,&nbsp;<var>t'</var>) are SPARQL-star triple patterns.
      </li></ol>

      <p>As for <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-26">RDF-star triples</a>, a <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-1">SPARQL-star triple pattern</a> <em class="rfc2119">MUST NOT</em> contain itself.</p>

      <p>A <dfn data-lt="bgp-star|BGP-star|SPARQL-star basic graph pattern" id="dfn-bgp-star">SPARQL-star basic graph pattern</dfn>&nbsp;(<abbr title="Basic Graph Pattern">BGP</abbr>-star) is a set of <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-2">SPARQL-star triple patterns</a>.</p>

      <p>A <dfn data-lt="ppp-star|SPARQL-star property path pattern" data-plurals="sparql-star property path patterns" id="dfn-ppp-star">SPARQL-star property path pattern</dfn> is a 3-tuple (<var>s</var>,<var>p</var>,<var>o</var>) where</p>
      <ul>
        <li><var>s</var> is either an <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_RDFTerm">RDF term</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">query variable</a>, or a <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-3">SPARQL-star triple pattern</a>,
        </li><li><var>p</var> is a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_PropertyPathExpr">property path expression</a>, and
        </li><li><var>o</var> is either an <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_RDFTerm">RDF term</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">query variable</a>, or a <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-4">SPARQL-star triple pattern</a>.
      </li></ul>

      <div class="issue" id="issue-container-number-7"><div role="heading" class="issue-title marker" id="h-issue-2" aria-level="4"><a href="https://github.com/w3c/rdf-star/issues/7"><span class="issue-number">Issue 7</span></a><span class="issue-label" aria-label="This issue is labelled as sparql*.">: Property path patterns in SPARQL* <a class="respec-gh-label" style="background-color: rgb(194, 224, 198); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22sparql*%22">sparql*</a></span></div><p>I have added the definition of a <a href="https://w3c.github.io/rdf-star/rdf-star-cg-spec.html#dfn-ppp-star" rel="nofollow">SPARQL* property path pattern</a> into the draft just for the sake of having such a definition. We need to think about whether it is useful to add this to SPARQL*, in which case we need to define the semantics of such SPARQL* property path patterns.</p>
<p>In fact, no matter what we decide, even for <a href="https://www.w3.org/TR/sparql11-query/#defn_PropertyPathPattern" rel="nofollow">standard property path patterns</a>, the semantics may have to be extended to use them over <a href="https://w3c.github.io/rdf-star/rdf-star-cg-spec.html#dfn-graph" rel="nofollow">RDF* graphs</a>.</p></div>

      <p>A <dfn data-lt="solution-star-mapping|SPARQL-star solution mapping" data-plurals="sparql-star solution mappings" id="dfn-solution-star-mapping">SPARQL-star solution mapping</dfn>&nbsp;μ is a partial function from the set of all <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">query variables</a> to the set of all <a href="#dfn-rdf-star-terms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdf-star-terms-4">RDF-star terms</a>.
      The domain of μ, denoted by dom(μ), is the set of <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">query variables</a> for which μ is defined.</p>

      <div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div><p class="">The notion of a <a href="#dfn-solution-star-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-solution-star-mapping-1">SPARQL-star solution mapping</a> extends the notion of a standard SPARQL <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_sparqlSolutionMapping">solution mapping</a>; that is, every SPARQL <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_sparqlSolutionMapping">solution mapping</a> is a <a href="#dfn-solution-star-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-solution-star-mapping-2">SPARQL-star solution mapping</a>. However, in contrast to SPARQL <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_sparqlSolutionMapping">solution mappings</a>, <a href="#dfn-solution-star-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-solution-star-mapping-3">SPARQL-star solution mappings</a> may map <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variables</a> also to <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-27">RDF-star triples</a>.</p></div>

      <p>All notions related to SPARQL solution mappings carry over naturally to SPARQL-star solution mappings. In particular, the definition of <dfn id="dfn-compatibility" data-no-export=""><a href="https://www.w3.org/TR/sparql11-query/#defn_algCompatibleMapping">compatibility</a></dfn> extends naturally to SPARQL-star solution mappings: two <a href="#dfn-solution-star-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-solution-star-mapping-4">SPARQL-star solution mappings</a> μ<sub>1</sub> and μ<sub>2</sub> are compatible if, for every variable v that is both in dom(μ<sub>1</sub>) and in dom(μ<sub>2</sub>), μ<sub>1</sub>(v) and μ<sub>2</sub>(v) are the same <a href="#dfn-rdf-star-terms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdf-star-terms-5">RDF-star term</a>.
      In this case, μ<sub>1</sub> ∪ μ<sub>2</sub> is also a SPARQL-star solution mapping.
      Moreover, for any SPARQL-star solution mapping&nbsp;μ we write card[Ω](μ) to denote the cardinality of μ in a multiset Ω of such mappings.
      Finally, given a <a href="#dfn-bgp-star" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-bgp-star-1"><abbr title="Basic Graph Pattern">BGP</abbr>-star</a>&nbsp;<var>B</var> and a SPARQL-star solution mapping&nbsp;μ, we write μ(<var>B</var>) to denote the result of replacing every variable&nbsp;<var>v</var> in <var>B</var> for which μ is defined with μ(v).
      </p>

      <p>Next, we aim to carry over the notion of <a href="https://www.w3.org/TR/sparql11-query/#BGPsparql">solutions for BGPs</a> to <a href="#dfn-bgp-star" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-bgp-star-2"><abbr title="Basic Graph Pattern">BGP</abbr>-star</a>. To this end, we first define an auxiliary concept that carries over the notion of an
      <a href="https://www.w3.org/TR/rdf11-mt/#dfn-instance">RDF instance mapping</a>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-mt" title="RDF 1.1 Semantics">RDF11-MT</a></cite>] to RDF-star.</p>

      <p>An <dfn data-lt="rdf-star-instance-mapping|RDF-star instance mapping" data-plurals="rdf-star instance mappings" id="dfn-rdf-star-instance-mapping">RDF-star instance mapping</dfn>&nbsp;σ is a partial function from the set of all <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank nodes</a> to the set of all <a href="#dfn-rdf-star-terms" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdf-star-terms-6">RDF-star terms</a>.
      The domain of&nbsp;σ, denoted by dom(σ), is the set of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank nodes</a> for which σ is defined.</p>

      <p>Similar to the corresponding notation for solution mappings, for an RDF-star instance mapping&nbsp;σ and a <abbr title="Basic Graph Pattern">BGP</abbr>-star&nbsp;<var>B</var> we write σ(<var>B</var>) to denote the result of replacing every blank node&nbsp;<var>b</var> in <var>B</var> for which σ is defined with σ(b).</p>

      <p>Now we are ready to define the notion of solution for <abbr title="Basic Graph Pattern">BGP</abbr>-star.</p>

      <p>Given a <a href="#dfn-bgp-star" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-bgp-star-3"><abbr title="Basic Graph Pattern">BGP</abbr>-star</a>&nbsp;<var>B</var> and an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-13">RDF-star graph</a>&nbsp;<var>G</var>, a <a href="#dfn-solution-star-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-solution-star-mapping-5">SPARQL-star solution mapping</a>&nbsp;μ is a <dfn data-lt="bgp-star-solution|solution for the BGP-star" id="dfn-bgp-star-solution">solution for the <abbr title="Basic Graph Pattern">BGP</abbr>-star</dfn>&nbsp;<var>B</var> <b>over</b>&nbsp;<var>G</var> if it has the following two properties</p>
      <ul>
        <li>dom(μ) is equivalent to the set of query variables in&nbsp;<var>B</var>, and
        </li><li>there exists an <a href="#dfn-rdf-star-instance-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdf-star-instance-mapping-1">RDF-star instance mapping</a>&nbsp;σ such that dom(σ) is equivalent to the set of blank nodes in&nbsp;<var>B</var> and μ(σ(<var>B</var>)) is a subgraph of <var>G</var>.
      </li></ul>

    </section>

    <section id="sparql-star-grammar">
      <h3 id="x4-2-grammar"><bdi class="secno">4.2 </bdi>Grammar<a class="self-link" aria-label="§" href="#sparql-star-grammar"></a></h3>

      <p>SPARQL-star is defined to follow the <a href="https://www.w3.org/TR/sparql11-query/#sparqlGrammar">same grammar</a> as SPARQL, <em>except</em> for the <a href="https://www.w3.org/TR/xml/#sec-notation"><abbr title="Extended Backus-Naur Form">EBNF</abbr> productions</a> specified below, which replace the productions having the same number (if any) in the original grammar.</p>

      <table class="grammar">
        <tbody><tr id="rBind">
          <td>[60]</td>
          <td><code>Bind</code></td>
          <td>::=</td>
          <td>
            <code class="token">'BIND'</code>
            <code class="token">'('</code>
            (
              <a href="https://www.w3.org/TR/sparql11-query/#rExpression">Expression</a> <code>|</code>
              <a href="#rEmbTP">EmbTP</a>
            )
            <code class="token">'AS'</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rVar">Var</a>
            <code class="token">')'</code>
          </td>
        </tr>
          <tr id="rTriplesSameSubject">
          <td>[75]</td>
          <td><code>TriplesSameSubject</code></td>
          <td>::=</td>
          <td>
            <a href="#rVarOrTermOrEmbTP">VarOrTermOrEmbTP</a>
            <a href="https://www.w3.org/TR/sparql11-query/#rPropertyListNotEmpty">PropertyListNotEmpty</a>
            <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rTriplesNode">TriplesNode</a>
            <a href="https://www.w3.org/TR/sparql11-query/#rPropertyList">PropertyList</a>
        </td>
        </tr><tr id="rObject">
          <td>[80]</td>
          <td><code>Object</code></td>
          <td>::=</td>
          <td>
            <a href="https://www.w3.org/TR/sparql11-query/#rGraphNode">GraphNode</a> <code>|</code>
            <a href="#rEmbTP">EmbTP</a>
          </td>
        </tr>
        <tr id="rTriplesSameSubjectPath">
          <td>[81]</td>
          <td><code>TriplesSameSubjectPath</code></td>
          <td>::=</td>
          <td>
            <a href="#rVarOrTermOrEmbTP">VarOrTermOrEmbTP</a>
            <a href="https://www.w3.org/TR/sparql11-query/#rPropertyListPathNotEmpty">PropertyListPathNotEmpty</a>
            <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rTriplesNode">TriplesNode</a>
            <a href="https://www.w3.org/TR/sparql11-query/#rPropertyListPath">PropertyListPath</a>
          </td>
        </tr>
        <tr id="rGraphNodePath">
          <td>[105]</td>
          <td><code>GraphNodePath</code></td>
          <td>::=</td>
          <td>
            <a href="#rVarOrTermOrEmbTP">VarOrTermOrEmbTP</a> <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rTriplesNodePath">TriplesNodePath</a> <code>|</code>
          </td>
        </tr>
        <tr id="rEmbTP">
          <td>[174]</td>
          <td><code>EmbTP</code></td>
          <td>::=</td>
          <td>
            <code class="token">'&lt;&lt;'</code>
            <a href="#rEmbSubjectOrObject">EmbSubjectOrObject</a>
            <a href="https://www.w3.org/TR/sparql11-query/#rVerb">Verb</a>
            <a href="#rEmbSubjectOrObject">EmbSubjectOrObject</a>
            <code class="token">'&gt;&gt;'</code>
          </td>
        </tr>
        <tr id="rEmbSubjectOrObject">
          <td>[175]</td>
          <td><code>EmbSubjectOrObject</code></td>
          <td>::=</td>
          <td>
            <a href="https://www.w3.org/TR/sparql11-query/#rVar">Var</a> <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rBlankNode">BlankNode</a> <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#riri">iri</a> <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rRDFLiteral">RDFLiteral</a> <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rNumericLiteral">NumericLiteral</a> <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rBooleanLiteral">BooleanLiteral</a> <code>|</code>
            <a href="#rEmbTP">EmbTP</a>
          </td>
        </tr>
        <tr id="rVarOrTermOrEmbTP">
          <td>[176]</td>
          <td><code>VarOrTermOrEmbTP</code></td>
          <td>::=</td>
          <td>
            <a href="https://www.w3.org/TR/sparql11-query/#rVar">Var</a> <code>|</code>
            <a href="https://www.w3.org/TR/sparql11-query/#rGraphTerm">GraphTerm</a> <code>|</code>
            <a href="#rEmbTP">EmbTP</a>
          </td>
        </tr>
      </tbody></table>

      <p>
        This introduces a notation for <dfn data-plurals="embedded triple pattern" id="dfn-embedded-triple-patterns">embedded triple patterns</dfn>
        (productions <a href="#rEmbTP">[174]</a> and following),
        which is similar to the one defined for <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-9">embedded triples</a> in <a href="#turtle-star" class="sec-ref">§&nbsp;<bdi class="secno">3.1 </bdi>Turtle-star</a>,
        but accepting also <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variables</a>.
        These <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-1">embedded triple patterns</a> are allowed in the subject
        (<a href="#rTriplesSameSubject">[75]</a>, <a href="#rTriplesSameSubjectPath">[81]</a>)
        and object
        (<a href="#rObject">[80]</a>, <a href="#rGraphNodePath">[105]</a>)
        positions of <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-5">SPARQL-star triple patterns</a>,
        as well as in BIND statements
        (<a href="#rBind">[60]</a>).
      </p>

      <div class="issue" id="issue-container-number-6"><div role="heading" class="issue-title marker" id="h-issue-3" aria-level="4"><a href="https://github.com/w3c/rdf-star/issues/6"><span class="issue-number">Issue 6</span></a><span class="issue-label" aria-label="This issue is labelled as sparql*.">: FIND instead of BIND <a class="respec-gh-label" style="background-color: rgb(194, 224, 198); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22sparql*%22">sparql*</a></span></div><p>Instead of reusing the keyword BIND for SPARQL* (as in my original proposal), we may want to consider using a different keyword for this functionality because the behavior is a bit different. For instance, <a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/klinovp/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/klinovp">@klinovp</a> has mentioned this issue in <a href="https://lists.w3.org/Archives/Public/public-rdf-star/2019Nov/0000.html" rel="nofollow">an email on the mailing list</a>. In <a href="https://lists.w3.org/Archives/Public/public-rdf-star/2020Aug/0008.html" rel="nofollow">another email</a>, <a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/afs/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/afs">@afs</a> has proposed to use the keyword FIND instead.</p></div>

      <div class="issue" id="issue-container-number-9"><div role="heading" class="issue-title marker" id="h-issue-4" aria-level="4"><a href="https://github.com/w3c/rdf-star/issues/9"><span class="issue-number">Issue 9</span></a><span class="issue-label" aria-label="This issue is labelled as concrete-syntax and sparql*.">: Include Annotation syntax in Turtle* and SPARQL* <a class="respec-gh-label" style="background-color: rgb(254, 242, 192); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22concrete-syntax%22">concrete-syntax</a><a class="respec-gh-label" style="background-color: rgb(194, 224, 198); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22sparql*%22">sparql*</a></span></div><p>This has already been <a href="https://lists.w3.org/Archives/Public/public-rdf-star/2020Aug/0045.html" rel="nofollow">discussed on the mailing list</a>.</p>
<p>The idea would be to have a notation like</p>
<pre><code aria-busy="false" class="hljs javascript">:bob :age <span class="hljs-number">42</span> {| :source &lt;http:<span class="hljs-comment">//example.org/~bob/&gt; |}.</span>
</code></pre>
<p>as shortcut for</p>
<pre><code aria-busy="false" class="hljs javascript">:bob :age <span class="hljs-number">42.</span>
&lt;&lt; :bob :age <span class="hljs-number">42</span> &gt;&gt; :source &lt;http:<span class="hljs-comment">//example.org/~bob/&gt;.</span>
</code></pre></div>

    </section>

    <section id="translation-to-the-algebra">
      <h3 id="x4-3-translation-to-the-algebra"><bdi class="secno">4.3 </bdi>Translation to the Algebra<a class="self-link" aria-label="§" href="#translation-to-the-algebra"></a></h3>

      <p>Based on the SPARQL grammar, the SPARQL specification <q>defines the process of converting graph patterns and solution modifiers in a SPARQL query string into a SPARQL algebra expression</q>&nbsp;[<a href="https://www.w3.org/TR/sparql11-query/#sparqlQuery">SPARQL11-QUERY, Section&nbsp;18.2</a>].  This process must be adjusted to consider the extended grammar introduced <a href="#sparql-star-grammar">above</a>. In the following, any step of the conversion process that requires adjustment is discussed.</p>

      <section id="variable-scope">
        <h4 id="x4-3-1-variable-scope"><bdi class="secno">4.3.1 </bdi>Variable Scope<a class="self-link" aria-label="§" href="#variable-scope"></a></h4>

        <p>As a basis of the translation, the SPARQL specification introduces a notion of <a href="https://www.w3.org/TR/sparql11-query/#variableScope">in-scope variables</a>. To cover the new syntax elements introduced in <a href="#sparql-star-grammar" class="sec-ref">§&nbsp;<bdi class="secno">4.2 </bdi>Grammar</a> this notion <em class="rfc2119">MUST</em> be extended as follows.</p>

        <ul>
          <li>A <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a> is in-scope of a <a href="#dfn-bgp-star" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-bgp-star-4"><abbr title="Basic Graph Pattern">BGP</abbr>-star</a> <var>B</var> if the <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a> occurs in <var>B</var>, which includes an occurrence in any <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-2">embedded triple pattern</a> in <var>B</var>&nbsp;(independent of the level of nesting).</li>
          <li>A <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a> is in-scope of a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_PropertyPathPattern">property path pattern</a> if the variable occurs in that pattern, which includes an occurrence in any embedded triple pattern in the pattern&nbsp;(independent of the level of nesting).</li>
          <li>A <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a> is in-scope of a BIND clause of the form <code>BIND&nbsp;(&nbsp;T&nbsp;AS&nbsp;v&nbsp;)</code>&nbsp;(where <var>T</var> is an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-3">embedded triple pattern</a>) if the variable is variable <var>v</var> or the variable occurs in the <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-4">embedded triple pattern</a> <var>T</var>. As for standard BIND clauses with expressions, variable <var>v</var> must <q>not [be] in-scope from the preceding elements in the group graph pattern in which [the BIND clause] is used</q>&nbsp;[<a href="https://www.w3.org/TR/sparql11-query/#variableScope">SPARQL11-QUERY, Section&nbsp;18.2.1]</a>].</li>
        </ul>
      </section>

      <section id="expand-syntax-forms">
        <h4 id="x4-3-2-expand-syntax-forms"><bdi class="secno">4.3.2 </bdi>Expand Syntax Forms<a class="self-link" aria-label="§" href="#expand-syntax-forms"></a></h4>

        <p>The translation process starts with expanding <q>abbreviations for IRIs and triple patterns</q>&nbsp;[<a href="https://www.w3.org/TR/sparql11-query/#sparqlExpandForms">SPARQL11-QUERY, Section&nbsp;18.2.2.1</a>]. This step <em class="rfc2119">MUST</em> be extended in two ways:</p>

        <ol>
          <li><div>
            <p>Abbreviations for <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_TriplePattern">triple patterns</a> with <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-5">embedded triple patterns</a> <em class="rfc2119">MUST</em> be expanded as if each <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-6">embedded triple pattern</a> was a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a> (or an <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_RDFTerm">RDF term</a>).

            </p><div class="example">
              For instance, the following syntax expression:
              <div class="example" id="example-5">
        <div class="marker">
    <a class="self-link" href="#example-5">Example<bdi> 5</bdi></a>
  </div> <pre data-content-type="application/x-sparql-star-query" class="nohighlight">&lt;&lt;?c a owl:Class&gt;&gt; dct:source ?src ;
    :entailing &lt;&lt;?c a rdfs:Class&gt;&gt; .</pre>
      </div>
              must be expanded to
              <div class="example" id="example-6">
        <div class="marker">
    <a class="self-link" href="#example-6">Example<bdi> 6</bdi></a>
  </div> <pre data-content-type="application/x-sparql-star-query" class="nohighlight">&lt;&lt;?c a owl:Class&gt;&gt; dct:source ?src .
&lt;&lt;?c a rdfs:Class&gt;&gt; :entailing &lt;&lt;?c a rdfs:Class&gt;&gt; .</pre>
      </div>
            </div>
          </div></li>
          <li><div>
            <p>Abbreviations for IRIs in all <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-7">embedded triple patterns</a> <em class="rfc2119">MUST</em> be expanded.</p>

            <div class="example">
              For instance, the embedded triple pattern
              <div class="example" id="example-7">
        <div class="marker">
    <a class="self-link" href="#example-7">Example<bdi> 7</bdi></a>
  </div> <pre data-content-type="application/x-sparql-star-query" class="nohighlight">&lt;&lt;?c a rdfs:Class&gt;&gt;</pre>
      </div>
              must be expanded to
              <div class="example" id="example-8">
        <div class="marker">
    <a class="self-link" href="#example-8">Example<bdi> 8</bdi></a>
  </div> <pre data-content-type="application/x-sparql-star-query" class="nohighlight">&lt;&lt;?c &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://www.w3.org/2000/01/rdf-schema#Class&gt;&gt;&gt;</pre>
      </div>
            </div>
          </div></li>
        </ol>
      </section>

      <section id="translate-property-path-patterns">
        <h4 id="x4-3-3-translate-property-path-patterns"><bdi class="secno">4.3.3 </bdi>Translate Property Path Patterns<a class="self-link" aria-label="§" href="#translate-property-path-patterns"></a></h4>

        <p>The <a href="https://www.w3.org/TR/sparql11-query/#sparqlTranslatePathPatterns">translation of property path patterns</a> has to be adjusted because the extended grammar allows for <a href="#dfn-ppp-star" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ppp-star-1">SPARQL-star property path patterns</a> whose subject or object is a <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-6">SPARQL-star triple pattern</a>.</p>

        <p>The translation as specified in the W3C specification distinguishes four cases. The first three of these cases do not require adjustment because they are taken care of either by recursion or by the adjusted translation of basic graph patterns (as defined in <a href="#translate-bgp" class="sec-ref">§&nbsp;<bdi class="secno">4.3.4 </bdi>Translate Basic Graph Patterns</a> below). However, the fourth case <em class="rfc2119">MUST</em> be adjusted as follows.</p>

        <p>Let <var>X</var> <var>P</var> <var>Y</var> be a string that corresponds to the fourth case in&nbsp;[<a href="https://www.w3.org/TR/sparql11-query/#sparqlTranslatePathPatterns">SPARQL11-QUERY, Section&nbsp;18.2.2.4</a>]. Given the grammar introduced in <a href="#sparql-star-grammar" class="sec-ref">§&nbsp;<bdi class="secno">4.2 </bdi>Grammar</a>, <var>X</var> and <var>Y</var> may be an <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_RDFTerm">RDF term</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a>, or an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-8">embedded triple pattern</a>, respectively (and <var>P</var> is a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_PropertyPathExpr">property path expression</a>). The string <var>X</var> <var>P</var> <var>Y</var> is translated to the algebra expression <code>Path</code>(<var>X’</var>,<var>P</var>,<var>Y’</var>) where <var>X’</var> and <var>Y’</var> are the result of calling a function named <code>Lift</code> for <var>X</var> and <var>Y</var>, respectively. For some input string <var>Z</var>&nbsp;(such as <var>X</var> or <var>Y</var>) that can be an <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_RDFTerm">RDF term</a>, a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a>, or an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-9">embedded triple pattern</a>, the function <code>Lift</code> is defined recursively as follows:</p>

        <ol id="lift">
          <li>If <var>Z</var> is an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-10">embedded triple pattern</a> &lt;&lt;<var>S</var>,<var>P</var>,<var>O</var>&gt;&gt; then return the <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-7">SPARQL-star triple pattern</a> (<code>Lift</code>(<var>S</var>), <var>P</var>, <code>Lift</code>(<var>O</var>));</li>
          <li>Otherwise, return <var>Z</var>.</li>
        </ol>

        <div class="note" role="note" id="issue-container-generatedID-3"><div role="heading" class="note-title marker" id="h-note-3" aria-level="5"><span>Note</span></div><div class="">
          The purpose of this translation step is to convert any property path pattern as can be written based on the extended grammar for SPARQL-star (cf. <a href="#sparql-star-grammar" class="sec-ref">§&nbsp;<bdi class="secno">4.2 </bdi>Grammar</a>) into a <a href="#dfn-ppp-star" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-ppp-star-2">SPARQL-star property path pattern</a> as considered in the algebra. To this end, the function <code>Lift</code> translates every <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-11">embedded triple pattern</a> as can be written in the SPARQL-star syntax into a <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-8">SPARQL-star triple pattern</a>.
        </div></div>
      </section>

      <section id="translate-bgp">
        <h4 id="x4-3-4-translate-basic-graph-patterns"><bdi class="secno">4.3.4 </bdi>Translate Basic Graph Patterns<a class="self-link" aria-label="§" href="#translate-bgp"></a></h4>

        <p>After translating <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_PropertyPathPattern">property path patterns</a>, the translation process collects <q>any adjacent triple patterns [...] to form a basic graph pattern</q>&nbsp;[<a href="https://www.w3.org/TR/sparql11-query/#sparqlTranslateBasicGraphPatterns">SPARQL11-QUERY, Section&nbsp;18.2.2.5</a>]. This step has to be adjusted because <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_TriplePattern">triple patterns</a> in the extended syntax may have an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-12">embedded triple pattern</a> in their subject position or in their object position (or in both). To ensure that every result of this step is a <a href="#dfn-bgp-star" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-bgp-star-5"><abbr title="Basic Graph Pattern">BGP</abbr>-star</a>, before adding a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_TriplePattern">triple pattern</a> to its corresponding collection, its subject and object <em class="rfc2119">MUST</em> be replaced by the result of calling <a href="#lift">function <code>Lift</code></a> for the subject and the object, respectively.</p>
      </section>

      <section id="translate-bind">
        <h4 id="x4-3-5-translate-bind-clauses-with-an-embedded-triple-pattern"><bdi class="secno">4.3.5 </bdi>Translate BIND Clauses with an Embedded Triple Pattern<a class="self-link" aria-label="§" href="#translate-bind"></a></h4>

        <p>The extended grammar in <a href="#sparql-star-grammar" class="sec-ref">§&nbsp;<bdi class="secno">4.2 </bdi>Grammar</a> allows for BIND clauses with an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-13">embedded triple pattern</a>. The translation of such a BIND clause to a SPARQL algebra expression requires a new algebra symbol:</p>

        <ul>
          <li>TR( <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-9">SPARQL-star triple pattern</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a> )</li>
        </ul>

        <p>Then, any string of the form <code>BIND(&nbsp;T&nbsp;AS&nbsp;v&nbsp;)</code> with <var>T</var> being an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-14">embedded triple pattern</a> (i.e., not a standard BIND expression) is translated to the algebra expression <code>TR</code>(<var>T’</var>, <var>v</var>) where <var>T’</var> is the result of the <a href="#lift">function <code>Lift</code></a> for <var>T</var>.</p>

        <p>Notice, the translation of BIND clauses with an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-15">embedded triple pattern</a> as defined in this section is used during <a href="https://www.w3.org/TR/sparql11-query/#sparqlTranslateGraphPatterns">the translation of group graph patterns</a>. The case of BIND clauses with an <a href="#dfn-embedded-triple-patterns" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-triple-patterns-16">embedded triple pattern</a> is covered in this translation of group graph patterns by the last, “catch all other” <code>IF</code> statement (i.e., the <code>IF</code> statement with the condition <code>E is any other form</code>) and not by the <code>IF</code> statement for BIND clauses with an expression.</p>
      </section>
    </section>

    <section id="evaluation-semantics">
      <h3 id="x4-4-evaluation-semantics"><bdi class="secno">4.4 </bdi>Evaluation Semantics<a class="self-link" aria-label="§" href="#evaluation-semantics"></a></h3>

      <p>The SPARQL specification defines a function <q>eval(<var>D</var>(<var>G</var>),&nbsp;algebra&nbsp;expression) as the evaluation of an algebra expression with respect to a dataset <var>D</var> having active graph <var>G</var></q>&nbsp;[<a href="https://www.w3.org/TR/sparql11-query/#sparqlAlgebraEval">SPARQL11-QUERY, Section 18.6</a>]. Recall that the dataset <var>D</var> in the context of SPARQL-star is an <a href="#dfn-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-dataset-4">RDF-star dataset</a> and, thus, the active graph <var>G</var> is an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-14">RDF-star graph</a>, and so is any other graph in dataset <var>D</var>. The definition of the <a href="https://www.w3.org/TR/sparql11-query/#sparqlAlgebraEval">eval</a> function is recursive; the two base cases of this definition for SPARQL-star are given as follows:</p>

      <ol>
        <li>For every <a href="#dfn-bgp-star" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-bgp-star-6"><abbr title="Basic Graph Pattern">BGP</abbr>-star</a> <var>B</var>, eval(<var>D</var>(<var>G</var>),&nbsp;<var>B</var>)&nbsp;is a multiset Ω that consists of all <a href="#dfn-solution-star-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-solution-star-mapping-6">SPARQL-star solution mappings</a> that are a <a href="#dfn-bgp-star-solution" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-bgp-star-solution-1">solution for the <abbr title="Basic Graph Pattern">BGP</abbr>-star</a>&nbsp;<var>B</var> over&nbsp;<var>G</var>. For every such mapping&nbsp;μ, card[Ω](μ) is the number of distinct <a href="#dfn-rdf-star-instance-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdf-star-instance-mapping-2">RDF-star instance mappings</a>&nbsp;σ such that dom(σ) is equivalent to the set of blank nodes in&nbsp;<var>B</var> and μ(σ(<var>B</var>)) is a subgraph of <var>G</var>. (For any SPARQL-star solution mapping&nbsp;μ' that is <em>not</em> a solution for&nbsp;<var>B</var> over&nbsp;<var>G</var>, we have that card[Ω](μ')=0; i.e., μ' is not in Ω.)</li>

        <li>For any algebra expression <var>E</var> of the form TR(<var>tp</var>, <var>?v</var>) where <var>tp</var> is a <a href="#dfn-triple-star-pattern" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-star-pattern-10">SPARQL-star triple pattern</a> and <var>?v</var> is a <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_QueryVariable">variable</a> (as introduced in <a href="#translate-bind" class="sec-ref">§&nbsp;<bdi class="secno">4.3.5 </bdi>Translate BIND Clauses with an Embedded Triple Pattern</a>), eval(<var>D</var>(<var>G</var>),&nbsp;<var>E</var>) is a multiset Ω that consists of as many <a href="#dfn-solution-star-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-solution-star-mapping-7">SPARQL-star solution mappings</a> as there are solution mappings in Ω', where Ω'=eval(<var>D</var>(<var>G</var>),{<var>tp</var>}), such that for every μ' in Ω' there exists a μ in Ω that has the following four properties:
          <ol type="i">
            <li>dom(μ) = dom(μ') ∪ {<var>?v</var>}</li>
            <li>μ and μ' are compatible</li>
            <li>μ(<var>?v</var>) = μ'(<var>tp</var>)</li>
            <li>card[Ω](μ) = card[Ω'](μ')</li>
          </ol>
        </li>
      </ol>

      <p>For any other algebra expression, the SPARQL specification defines algebra operators&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-sparql11-query" title="SPARQL 1.1 Query Language">SPARQL11-QUERY</a></cite>]. These definitions can be extended naturally to operate over multisets of <a href="#dfn-solution-star-mapping" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-solution-star-mapping-8">SPARQL-star solution mappings</a> (instead of ordinary <a data-link-type="dfn" href="https://www.w3.org/TR/sparql11-query/#defn_sparqlSolutionMapping">solution mappings</a>). Given this extension, the recursive steps of the definition of the <a href="https://www.w3.org/TR/sparql11-query/#sparqlAlgebraEval">eval</a> function for SPARQL-star are the same as in the SPARQL specification.</p>
    </section>

    <section id="query-result-formats">
      <h3 id="x4-5-query-result-formats"><bdi class="secno">4.5 </bdi>Query Result Formats<a class="self-link" aria-label="§" href="#query-result-formats"></a></h3>

      <p>In SPARQL, queries can take four forms: <em>SELECT</em>, <em>CONSTRUCT</em>, <em>DESCRIBE</em>, and <em>ASK</em> - see <a href="https://www.w3.org/TR/sparql11-query/#QueryForms">SPARQL1.1 Query, Section 16</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-sparql11-query" title="SPARQL 1.1 Query Language">SPARQL11-QUERY</a></cite>]. The first of these returns a <a href="https://www.w3.org/TR/sparql11-query/#defn_sparqlSolutionSequence">sequence of solution mappings</a> that contain variable bindings. The second and third both return an RDF graph, and the last returns a boolean value.
      </p>
      <p>The result of the <em>ASK</em> query form is not changed by the introduction of RDF-star, and the result of the <em>CONSTRUCT</em> and <em>DESCRIBE</em> forms can be represented by <a href="#turtle-star">Turtle-star</a>. However, since the <em>SELECT</em> form deals with returning individual RDF terms, the specific serialization formats for representing such query results need to be extended so that the new <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-10">embedded</a> triple RDF term can be represented. In this section, we propose extensions for the two most common formats for this purpose: <cite><a href="https://www.w3.org/TR/sparql11-results-json/">SPARQL 1.1 Query Results JSON Format</a></cite>, and <cite><a href="https://www.w3.org/TR/rdf-sparql-XMLres/">SPARQL Query Results XML Format (Second Edition)</a></cite>.</p>

      <div class="issue" id="issue-container-number-43"><div role="heading" class="issue-title marker" id="h-issue-5" aria-level="4"><a href="https://github.com/w3c/rdf-star/issues/43"><span class="issue-number">Issue 43</span></a><span class="issue-label" aria-label="This issue is labelled as concrete-syntax and sparql*.">: New mime types and XML namespace for the extended query result formats <a class="respec-gh-label" style="background-color: rgb(254, 242, 192); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22concrete-syntax%22">concrete-syntax</a><a class="respec-gh-label" style="background-color: rgb(194, 224, 198); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22sparql*%22">sparql*</a></span></div><p>In addition to defining the extended formats for serializing the result of a SPARQL* SELECT query (<a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="720915489" data-permission-text="Title is private" data-url="https://github.com/w3c/rdf-star/issues/12" data-hovercard-type="issue" data-hovercard-url="/w3c/rdf-star/issues/12/hovercard" href="https://github.com/w3c/rdf-star/issues/12">#12</a> and <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="720926678" data-permission-text="Title is private" data-url="https://github.com/w3c/rdf-star/issues/13" data-hovercard-type="issue" data-hovercard-url="/w3c/rdf-star/issues/13/hovercard" href="https://github.com/w3c/rdf-star/issues/13">#13</a>), we have to decide whether we need/want new mime types for these extended formats? Similarly, do we need/want to introduce another namespace for the extended XML result format?</p></div>

      <section id="sparql-star-query-results-json-format">
        <h4 id="x4-5-1-sparql-star-query-results-json-format"><bdi class="secno">4.5.1 </bdi>SPARQL-star Query Results JSON Format<a class="self-link" aria-label="§" href="#sparql-star-query-results-json-format"></a></h4>
        <p>
        The result of a SPARQL SELECT query is serialized in JSON as defined in <cite><a href="https://www.w3.org/TR/sparql11-results-json/">SPARQL 1.1 Query Results JSON Format</a></cite>, which specifies a JSON representation of variable bindings to RDF terms (see [<a href="https://www.w3.org/TR/sparql11-results-json/#select-results">sparql11-results-json, Section 3.2</a>]). To accommodate the new RDF term for <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-11">embedded</a> triples that RDF-star introduces, the table of RDF term JSON representations in  <a href="https://www.w3.org/TR/sparql11-results-json/#select-encode-terms">sparql11-results-json, Section 3.2.2</a> is extended with the following entry:
        </p>
        <dl>
            <dt>An <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-12">embedded</a> triple with subject RDF term <code>S</code>, predicate RDF term <code>P</code> and object RDF term <code>O</code></dt>
            <dd>
              <pre aria-busy="false"><code class="hljs json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"triple"</span>,
  <span class="hljs-attr">"value"</span>: {
     <span class="hljs-attr">"subject"</span>: S,
     <span class="hljs-attr">"predicate"</span>: P,
     <span class="hljs-attr">"object"</span>: O
  }
}</code></pre>
              where <code>S</code>, <code>P</code> and <code>O</code> are encoded using the same format, recursively.
            </dd>
          </dl>
        <div class="example">
            Consider the following RDF term, an <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-13">embedded</a> triple in Turtle-star syntax:
          <div class="example" id="example-9">
        <div class="marker">
    <a class="self-link" href="#example-9">Example<bdi> 9</bdi></a>
  </div> <pre data-content-type="text/x-turtle-star" class="nohighlight">&lt;&lt; &lt;http://example.org/alice&gt; &lt;http://example.org/name&gt; "Alice" &gt;&gt;</pre>
      </div>
          This term is represented in JSON as follows:
          <div class="example" id="example-10">
        <div class="marker">
    <a class="self-link" href="#example-10">Example<bdi> 10</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript">{
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"triple"</span>,
  <span class="hljs-string">"value"</span>: {
     <span class="hljs-string">"subject"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"uri"</span>,
        <span class="hljs-string">"value"</span> <span class="hljs-string">"http://example.org/alice"</span>
     },
     <span class="hljs-string">"predicate"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"uri"</span>,
        <span class="hljs-string">"value"</span> <span class="hljs-string">"http://example.org/name"</span>
     },
     <span class="hljs-string">"object"</span>: {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"literal"</span>,
        <span class="hljs-string">"value"</span> <span class="hljs-string">"Alice"</span>,
        <span class="hljs-string">"datatype"</span>: <span class="hljs-string">"http://www.w3.org/2001/XMLSchema#string"</span>
     },
  }
}</code></pre>
      </div>
        </div>
      
      </section>

      <section id="sparql-star-query-results-xml-format">
        <h4 id="x4-5-2-sparql-star-query-results-xml-format"><bdi class="secno">4.5.2 </bdi>SPARQL-star Query Results XML Format<a class="self-link" aria-label="§" href="#sparql-star-query-results-xml-format"></a></h4>
       <p>
        The result of a SPARQL SELECT query is serialized in XML as defined in <cite><a href="https://www.w3.org/TR/rdf-sparql-XMLres/">SPARQL Query Results XML Format (Second Edition)</a></cite>. This format proposes an XML representation of variable bindings to RDF terms.
       </p>
       <p>To accommodate the new RDF term for <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-14">embedded</a> triples that RDF-star introduces, the list of RDF terms and their XML representations in [<a href="rdf-sparql-XMLres#results">rdf-sparql-XMLres, Section 2.3.1</a>] is extended as follows:
        </p>
        <p>
        </p><dl>
            <dt>An <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-15">embedded</a> triple with subject term <code>S</code>, predicate term <code>P</code>, and object term <code>O</code></dt>
          <dd>
            <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">binding</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">triple</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">subject</span>&gt;</span>S<span class="hljs-tag">&lt;/<span class="hljs-name">subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">predicate</span>&gt;</span>P<span class="hljs-tag">&lt;/<span class="hljs-name">predicate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">object</span>&gt;</span>O<span class="hljs-tag">&lt;/<span class="hljs-name">object</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">triple</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">binding</span>&gt;</span></code></pre>
            where <code>S</code>, <code>P</code> and <code>O</code> are encoded recursively, using the same format, without the enclosing <code>&lt;binding&gt;</code> tag.
          </dd>
        </dl>
        <div class="example">
            Consider the following RDF term, an <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-16">embedded</a> triple in Turtle-star syntax:
          <div class="example" id="example-11">
        <div class="marker">
    <a class="self-link" href="#example-11">Example<bdi> 11</bdi></a>
  </div> <pre data-content-type="text/x-turtle-star" class="nohighlight">&lt;&lt; &lt;http://example.org/alice&gt; &lt;http://example.org/name&gt; "Alice" &gt;&gt;</pre>
      </div>
          This term is represented in XML as follows:
          <div class="example" id="example-12">
        <div class="marker">
    <a class="self-link" href="#example-12">Example<bdi> 12</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">triple</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">subject</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">uri</span>&gt;</span>http://example.org/alice<span class="hljs-tag">&lt;/<span class="hljs-name">uri</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">predicate</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">uri</span>&gt;</span>http://example.org/name<span class="hljs-tag">&lt;/<span class="hljs-name">uri</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">predicate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">object</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">literal</span> <span class="hljs-attr">datatype</span>=<span class="hljs-string">'http://www.w3.org/2001/XMLSchema#string'</span>&gt;</span>Alice<span class="hljs-tag">&lt;/<span class="hljs-name">literal</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">object</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">triple</span>&gt;</span></code></pre>
      </div>
        </div>

        

      </section>

    </section>

  </section>

  <section id="sparql-star-update">
    <h2 id="x5-sparql-star-update"><bdi class="secno">5. </bdi>SPARQL-star Update<a class="self-link" aria-label="§" href="#sparql-star-update"></a></h2>

    <div class="issue" id="issue-container-number-14"><div role="heading" class="issue-title marker" id="h-issue-6" aria-level="3"><a href="https://github.com/w3c/rdf-star/issues/14"><span class="issue-number">Issue 14</span></a><span class="issue-label" aria-label="This issue is labelled as sparql*.">: Section that defines SPARQL* Update <a class="respec-gh-label" style="background-color: rgb(194, 224, 198); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22sparql*%22">sparql*</a></span></div><p>We need a section that defines SPARQL* Update. The text for this section can be taken from the following document: <a rel="nofollow" href="https://blog.liu.se/olafhartig/documents/sparql-update/">https://blog.liu.se/olafhartig/documents/sparql-update/</a></p></div>

  </section>

  <section id="rdf-star-semantics">
    <h2 id="x6-rdf-star-semantics"><bdi class="secno">6. </bdi>RDF-star Semantics<a class="self-link" aria-label="§" href="#rdf-star-semantics"></a></h2>

    <p>In this section, we provide a model-theoretic semantics for RDF-star, based on the one defined in <cite><a href="https://www.w3.org/TR/rdf11-mt/">RDF 1.1 Semantics</a></cite>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-mt" title="RDF 1.1 Semantics">RDF11-MT</a></cite>]. More precisely, we define a mapping from RDF-star's abstract syntax into standard RDF's abstract syntax, and define the semantics of <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-15">RDF-star graphs</a> in terms of the semantics of the mapped <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graphs</a>.</p>

    <p>In the following, we introduce a number of definitions specific to RDF-star, which rely on the following notions, defined in <cite><a href="https://www.w3.org/TR/rdf11-concepts/">RDF 1.1 Concepts and Abstract Syntax</a></cite>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>] and <cite><a href="https://www.w3.org/TR/rdf11-mt/">RDF 1.1 Semantics</a></cite>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-mt" title="RDF 1.1 Semantics">RDF11-MT</a></cite>]:
      <dfn id="dfn-datatype" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-datatype">datatype</a></dfn>,
      <dfn id="dfn-lexical-form" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form">lexical form</a></dfn>,
      <dfn id="dfn-simple-literal" data-no-export=""><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-simple-literal">simple literal</a></dfn>,
      <dfn id="dfn-ill-typed" data-no-export=""><a href="https://www.w3.org/TR/rdf11-mt/#dfn-ill-typed">ill-typed</a></dfn>,
      <dfn data-lt="merge|merging" id="dfn-merge" data-no-export=""><a href="https://www.w3.org/TR/rdf11-mt/#dfn-merging">merging</a></dfn>,
      <dfn data-lt="satisfiable|satisfiability" id="dfn-satisfiable" data-no-export=""><a href="https://www.w3.org/TR/rdf11-mt/#dfn-satisfiable">satisfiability</a></dfn>,
      <dfn data-lt="unsatisfiable|unsatisfiability" id="dfn-unsatisfiable" data-no-export=""><a href="https://www.w3.org/TR/rdf11-mt/#dfn-unsatisfiable">unsatisfiability</a></dfn>,
      <dfn data-lt="entail|entailed|entailment" id="dfn-entail" data-no-export=""><a href="https://www.w3.org/TR/rdf11-mt/#dfn-entail">entailment</a></dfn>,
      and <dfn data-lt="equivalent|equivalence" id="dfn-equivalent" data-no-export=""><a href="https://www.w3.org/TR/rdf11-mt/#dfn-equivalent">equivalence</a></dfn>.
    </p>

    <section id="mapping">
      <h3 id="x6-1-mapping-rdf-star-abstract-syntax-to-rdf"><bdi class="secno">6.1 </bdi>Mapping RDF-star abstract syntax to RDF<a class="self-link" aria-label="§" href="#mapping"></a></h3>

      <p>We consider six <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRIs</a> <var data-type="subject term">ST</var>, <var data-type="predicate term">PT</var>, <var data-type="object term">OT</var>, <var data-type="subject string">SS</var>, <var data-type="predicate string">PS</var> and <var data-type="object string">OS</var> that will have a special meaning in our mapping.</p>

      <p>We define a mapping <var>L</var> that maps any <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal">literal</a> <var>t</var> to a literal with </p><ul>
        <li><code>xsd:string</code> as its <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-datatype">datatype</a>, and</li>
        <li>the <a href="https://www.w3.org/TR/n-triples/#canonical-ntriples">canonical N-Triples</a> representation of <var>t</var> as its <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form">lexical form</a>&nbsp;[<cite><a class="bibref" data-link-type="biblio" href="#bib-n-triples" title="RDF 1.1 N-Triples">N-TRIPLES</a></cite>]. If <var>t</var> is itself a literal with the <code>xsd:string</code> <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-datatype">datatype</a>, the representation <em class="rfc2119">MUST</em> be a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-simple-literal">simple literal</a>.</li>
      </ul>
      <p></p>

      <p>Given an <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-16">RDF-star graph</a> <var>G</var>, the following steps transform it into an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a> that we call <var>unstar</var>(<var>G</var>).</p>

      <ol>
        <li>Pick an <a href="#dfn-triple" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-triple-28">RDF-star triple</a> (<var>s</var>, <var>p</var>, <var>o</var>) in the <a href="#dfn-constituent" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-constituent-5">constituents</a> of <var>G</var> such that neither <var>s</var> nor <var>o</var> is an <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-17">embedded triple</a>.</li>
        <li>Mint a fresh blank node <var>b</var>, and replace by <var>b</var> all occurrences of (<var>s</var>, <var>p</var>, <var>o</var>) in the subject or object position of an <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-3">asserted</a> or <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-18">embedded triple</a> of <var>G</var>.</li>
        <li>Add the following <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-4">asserted triples</a> to <var>G</var>:<ul>
          <li>(<var>b</var>, <var data-type="subject term">ST</var>, <var>s</var>)</li>
          <li>(<var>b</var>, <var data-type="predicate term">PT</var>, <var>p</var>)</li>
          <li>(<var>b</var>, <var data-type="object term">OT</var>, <var>o</var>) unless <var>o</var> is an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-ill-typed">ill-typed</a> literal</li>
          <li>(<var>b</var>, <var data-type="subject string">SS</var>, <var>L</var>(<var>s</var>)) unless <var>s</var> is <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a></li>
          <li>(<var>b</var>, <var data-type="predicate string">PS</var>, <var>L</var>(<var>p</var>))</li>
          <li>(<var>b</var>, <var data-type="object string">OS</var>, <var>L</var>(<var>o</var>)) unless <var>o</var> is <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node">blank node</a></li>
        </ul></li>
        <li>Repeat the steps above until there are no embedded triples left in <var>G</var>.</li>
      </ol>
      <p>After these steps, <var>unstar</var>(<var>G</var>) is an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a>, as it contains no embedded triples. Note that if <var>G</var> was already an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a>, then <var>unstar</var>(<var>G</var>)&nbsp;=&nbsp;<var>G</var>.</p>

    </section>

    <section id="entailment-of-rdf-star-graphs">
      <h3 id="x6-2-entailment-of-rdf-star-graphs"><bdi class="secno">6.2 </bdi>Entailment of <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-17">RDF-star graphs</a><a class="self-link" aria-label="§" href="#entailment-of-rdf-star-graphs"></a></h3>

      <p>Following <cite><a href="https://www.w3.org/TR/rdf11-mt/">RDF 1.1 Semantics</a></cite>, we extend the notions of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-satisfiable">satisfiability</a> and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-entail">entailment</a> for <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-18">RDF-star graphs</a>. Given two <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-19">RDF-star graphs</a> <var>G</var> and <var>H</var>:</p><p>
      </p><ul>
        <li>We say that <var>G</var> is (simply) <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-satisfiable">satisfiable</a> (resp. <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-unsatisfiable">unsatisfiable</a>) if and only if <var>unstar</var>(<var>G</var>) is (simply) <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-satisfiable">satisfiable</a> (resp. <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-unsatisfiable">unsatisfiable</a>).</li>
        <li>We say that <var>H</var> is (simply) <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-entail">entailed</a> by (resp. <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-equivalent">equivalent</a> to) <var>G</var> if and only if <var>unstar</var>(<var>H</var>) is (simply) <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-entail">entailed</a> by (resp. <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-equivalent">equivalent</a> to) <var>unstar</var>(<var>G</var>).</li>
        <li>Other notions of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-satisfiable">satisfiability</a> and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-entail">entailment</a>, such as <a href="https://www.w3.org/TR/rdf11-mt/#rdf-entailment">RDF entailment</a> or <a href="https://www.w3.org/TR/rdf11-mt/#rdfs-entailment">RDFS entailment</a>, can be extended in the same way for <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-20">RDF-star graphs</a>.</li>
      </ul>
    </section>

    <section class="informative" id="remarks">
      <h3 id="x6-3-remarks"><bdi class="secno">6.3 </bdi>Remarks<a class="self-link" aria-label="§" href="#remarks"></a></h3><p><em>This section is non-normative.</em></p>

      <section id="combining-rdf-star-graphs">
        <h4 id="x6-3-1-combining-rdf-star-graphs"><bdi class="secno">6.3.1 </bdi>Combining RDF-star graphs<a class="self-link" aria-label="§" href="#combining-rdf-star-graphs"></a></h4>

        <p>Care must be taken when <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graphs</a> that result from <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-21">RDF-star graphs</a> are combined through union or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-mt/#dfn-merging">merging</a>. Given two <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-22">RDF-star graphs</a> <var>G</var> and <var>H</var>, it may be the case that <var>unstar</var>(<var>G</var>&nbsp;∪&nbsp;<var>H</var>) ≠ <var>unstar</var>(<var>G</var>)&nbsp;∪&nbsp;<var>unstar</var>(<var>H</var>). More precisely, if <var>G</var> and <var>H</var> contain the same <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-19">embedded triple</a>, this triple will be mapped to a single blank node in <var>unstar</var>(<var>G</var>&nbsp;∪&nbsp;<var>H</var>), but in two potentially different blank nodes in <var>unstar</var>(<var>G</var>)&nbsp;∪&nbsp;<var>unstar</var>(<var>H</var>). These blank nodes will need to be unified in order to get the correct entailments.</p>

      </section>
      <section id="considerations-on-interoperability">
        <h4 id="x6-3-2-considerations-on-interoperability"><bdi class="secno">6.3.2 </bdi>Considerations on interoperability<a class="self-link" aria-label="§" href="#considerations-on-interoperability"></a></h4>

        <p>The special properties (<var>ST</var>, <var>PT</var>, etc.), used in the mapping for representing <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-20">embedded triples</a> in plain RDF, are deliberately not specified. As a consequence, although any <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-23">RDF-star graph</a> <var>G</var> is semantically equivalent to an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph">RDF graph</a> <var>unstar</var>(<var>G</var>), that latter graph is implementation dependent, as different systems will use a different concrete <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRI</a> for each special property.</p>

        <p>This makes it impossible for RDF-star-aware systems to reliably exchange <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-24">RDF-star graphs</a> in their mapped form using non-RDF-star concrete syntaxes (unless of course the <a href="#dfn-graph" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-25">RDF-star graph</a> contains no <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-21">embedded triple</a>). However, such systems can always use <a href="#turtle-star">Turtle-star</a> or other extended concrete syntaxes, so that does not limit interoperability among them. On the other hand, it prevents the unrestricted use of the special properties, because that may lead to surprising corner cases, as illustrated in <a href="#unrestricted-use-of-ST-and-SS" class="box-ref">Example<bdi> 13</bdi></a>. Supporting these corner cases would be a significant burden on RDF-star implementations, for a very limited utility.</p>

        <p>Furthermore, it is expected that some implementations will not rely on the mapping, but represent and work directly with the <a href="#concepts">abstract syntax</a> of RDF-star. For these implementations, having to handle both the native and the mapped representation of <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-22">embedded triples</a> would be even more challenging.</p>

        <div class="example" id="unrestricted-use-of-ST-and-SS">
        <div class="marker">
    <a class="self-link" href="#unrestricted-use-of-ST-and-SS">Example<bdi> 13</bdi></a>
  </div> <pre data-content-type="text/x-turtle-star" class="nohighlight">:alice :says &lt;&lt; :bob :age 42 &gt;&gt;.
&lt;&lt; :bob :age 42 &gt;&gt; :ST :charlie;
                   :SS "&lt;http://example.org/charlie&gt;".

# assuming that :ST and :SS stand for the corresponding special IRIs,
# the graph above entails the graph below

:alice :says &lt;&lt; :charlie :age 42 &gt;&gt;.</pre>
      </div>

        <p>The exchange of a mapped graph <var>unstar</var>(<var>G</var>) using standard RDF concrete syntaxes, with non-standard <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRIs</a> in place of the special properties, is however possible and useful when communicating with legacy RDF systems. For those systems, the special properties have no special meaning, so using non-standard <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri">IRIs</a> makes no difference to them.</p>

      </section>

    </section>

    <div class="issue" id="issue-container-number-95"><div role="heading" class="issue-title marker" id="h-issue-7" aria-level="3"><a href="https://github.com/w3c/rdf-star/issues/95"><span class="issue-number">Issue 95</span></a><span class="issue-label" aria-label="This issue is labelled as semantics.">: alternative semantic characterisations for RDF* <a class="respec-gh-label" style="background-color: rgb(233, 150, 149); color: rgb(0, 0, 0);" href="https://github.com/w3c/rdf-star/issues/?q=is%3Aissue+is%3Aopen+label%3A%22semantics%22">semantics</a></span></div><p>There are several resent proposals for semantics.</p>
<p>The proposals can be found in<br>
1/ <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="781615954" data-permission-text="Title is private" data-url="https://github.com/w3c/rdf-star/issues/81" data-hovercard-type="pull_request" data-hovercard-url="/w3c/rdf-star/pull/81/hovercard" href="https://github.com/w3c/rdf-star/pull/81">#81</a><br>
2/ <a class="issue-link js-issue-link" data-error-text="Failed to load title" data-id="801664560" data-permission-text="Title is private" data-url="https://github.com/w3c/rdf-star/issues/88" data-hovercard-type="pull_request" data-hovercard-url="/w3c/rdf-star/pull/88/hovercard" href="https://github.com/w3c/rdf-star/pull/88">#88</a><br>
3/ <a rel="nofollow" href="https://lists.w3.org/Archives/Public/public-rdf-star/2021Jan/0057.html">https://lists.w3.org/Archives/Public/public-rdf-star/2021Jan/0057.html</a><br>
4/ <a rel="nofollow" href="https://lists.w3.org/Archives/Public/public-rdf-star/2021Jan/0059.html">https://lists.w3.org/Archives/Public/public-rdf-star/2021Jan/0059.html</a><br>
and<br>
5/ <a rel="nofollow" href="https://lists.w3.org/Archives/Public/public-rdf-star/2021Feb/0038.html">https://lists.w3.org/Archives/Public/public-rdf-star/2021Feb/0038.html</a></p>
<p>All proposals create RDF graphs and the semantics of RDF* is defined as a semantics for these RDF graphs.</p>
<p>The differences between them lie in four areas:<br>
A) RDF* graphs as an abstract syntax<br>
B) hidden vocabulary for RDF* reification<br>
C) special datatype(s) for embedded triples<br>
D) extended semantics for RDF* reification vocabulary</p>
<p>First, there is whether there is the notion of an RDF* graph.   RDF* surface syntax can be expressed by parsing RDF* surface syntax into RDF* graphs and then transforming these RDF* graphs into RDF graphs.  Alternatively, RDF* surface syntax can be expressed by parsing surface syntax directly into RDF graphs.</p>
<p>Second, there is whether the vocabulary used to reify embedded triples is hidden or not.  If so, then RDF* embedded triples cannot be constructed by means other than embedded triple syntax.  If not, then regular RDF constructs (almost certainly reification) can be used to get the same effect as embedded triples.</p>
<p>Third, there is whether one or more special datatypes are needed for the subject, predicate, or object of embedded triples.</p>
<p>Fourth, there is whether the semantics of RDF* needs an extension of RDF semantics on the resultant RDF graphs (aside from the semantics of any new datatypes).</p>
<p>Here is a table of my understanding of how the proposals stand on the above differences.</p>
<table role="table">
<thead>
<tr>
<th>Characteristic</th>
<th>1/ P81</th>
<th>2/ P88</th>
<th>3/57</th>
<th>4/ 59</th>
<th>5/ 38</th>
</tr>
</thead>
<tbody>
<tr>
<td>A) RDF* graphs</td>
<td>YES</td>
<td>YES</td>
<td>YES</td>
<td>YES</td>
<td>NO</td>
</tr>
<tr>
<td>B) hidden vocabulary</td>
<td>YES</td>
<td>YES</td>
<td>NO</td>
<td>NO</td>
<td>NO</td>
</tr>
<tr>
<td>C) special datatype(s)</td>
<td>YES</td>
<td>NO</td>
<td>YES</td>
<td>NO</td>
<td>NO</td>
</tr>
<tr>
<td>D) extended semantics</td>
<td>YES</td>
<td>NO</td>
<td>NO</td>
<td>NO</td>
<td>NO</td>
</tr>
</tbody>
</table></div>

  </section>

  <section class="appendix informative" id="historical-remarks">
    <h2 id="a-historical-remarks"><bdi class="secno">A. </bdi>Historical remarks<a class="self-link" aria-label="§" href="#historical-remarks"></a></h2><p><em>This section is non-normative.</em></p>

    <section id="sa-mode-and-pg-mode">
      <h3 id="a-1-sa-mode-and-pg-mode"><bdi class="secno">A.1 </bdi>SA-mode and PG-mode<a class="self-link" aria-label="§" href="#sa-mode-and-pg-mode"></a></h3>

      <p>A lot of discussions on the <a href="https://lists.w3.org/Archives/Public/public-rdf-star/">RDF-star mailing list</a> and <a href="https://github.com/w3c/rdf-star">GitHub repository</a> refer to SA-mode and PG-mode. Those abbreviations stand for "Separate Assertion mode" and "Property Graph mode". They originate in the fact that different versions of RDF-star have been published over the years, with different designs. In PG-mode, any <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-23">embedded triple</a> was also considered <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-5">asserted</a>. SA-mode, on the other hand, allowed the use of <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-24">embedded triples</a> without those triples being automatically <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-6">asserted</a>, requiring that they be <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-7">asserted</a> separately when that was intended. SA-mode was more flexible, but induced redundancy in the use-cases that PG-mode was designed to address.</p>

      <p>The notion of <a href="#grammar-production-annotation">annotations</a> in the <a href="#turtle-star">Turtle-star</a> syntax was introduced to remove the need for different modes. Rather than interpret the same syntax differently in each mode, which would have caused interoperability problems and required a switch for those modes, it was decided to provide a different syntax for each use case.</p>

      <ul>
        <li>The <code>&lt;&lt; ... &gt;&gt;</code> syntax represents a triple that is <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-25">embedded</a> without being <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-8">asserted</a>, satisfying the need formerly filled by SA-mode.</li>
        <li>The <code>:a :b :c {| :p :o ... |}</code> annotation syntax creates triples where the subject is an <a href="#dfn-embedded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-embedded-26">embedded</a> version of the triple <a href="#dfn-asserted" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-asserted-9">asserted</a> just before the annotation (here, <code>:a :b :c</code>), without the need to repeat it, satisfying the need formerly filled by PG-mode.</li>
      </ul>
    </section>

    <section id="the-seminal-example">
      <h3 id="a-2-the-seminal-example"><bdi class="secno">A.2 </bdi>The seminal example<a class="self-link" aria-label="§" href="#the-seminal-example"></a></h3>

      <p>The motivating example in the original RDF-star paper [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf-star-foundation" title="Foundations of RDF* and SPARQL* - An Alternative Approach to Statement-Level Metadata in RDF.">RDF-STAR-FOUNDATION</a></cite>] was on a provenance use-case, and is repeated below.</p>

      <div class="example" id="example-14">
        <div class="marker">
    <a class="self-link" href="#example-14">Example<bdi> 14</bdi></a>
  </div> <pre data-content-type="text/x-turtle-star" class="nohighlight"># the controversial seminal example
:bob foaf:name "Bob".
&lt;&lt;:bob foaf:age 23&gt;&gt; dct:creator &lt;http://example.com/crawlers#c1&gt; ;
                     dct:source &lt;http://example.net/listing.html&gt; .</pre>
      </div>

      <p>This example was further debated on the <a href="https://lists.w3.org/Archives/Public/public-rdf-star/">RDF-star mailing list</a>, as it appears to have set wrong expectations about what embedded triples represent. More precisely, from this example, one may wrongly assume that <code>&lt;&lt;:bob foaf:age 23&gt;&gt;</code> represents the <em>occurrence</em> of the given triple at the address <code>http://example.net/listing.html</code> (see <a href="#occurrences" class="sec-ref">§&nbsp;<bdi class="secno">2.1 </bdi>Triples and occurrences</a>). This impression may be reinforced by the use of <code>dct:creator</code>: arguably, a triple (as a unique abstract entity) is not "created" by anyone, while an occurrence thereof can be said to be created or authored.</p>

      <p>Another serious issue with this example is that it does not allow the addition of other creators and sources for the triple: one could not tell which source corresponds to which creator. Correctly capturing this information would require additional nodes to explicitly represent triple occurrences, as in <a href="#occurrences-example" class="box-ref">Example<bdi> 4</bdi></a>. In retrospect, the provenance use-case, although a valid use-case for RDF-star, was not the most suitable choice for an introductory example.</p>

    </section>

  </section>

  <section class="appendix informative" id="issue-summary"><h2 id="b-issue-summary"><bdi class="secno">B. </bdi>Issue Summary<a class="self-link" aria-label="§" href="#issue-summary"></a></h2><p><em>This section is non-normative.</em></p>
    
  <ul><li><a href="#issue-container-number-93">Issue 93</a><span style="text-transform: none">: annotation-syntax example in the overview/primer part</span></li><li><a href="#issue-container-number-94">Issue 94</a><span style="text-transform: none">: SPARQL-star update example in the overview/primer part</span></li><li><a href="#issue-container-number-3">Issue 3</a><span style="text-transform: none">: Do we need more things in the 'conformance' section?</span></li><li><a href="#issue-container-number-7">Issue 7</a><span style="text-transform: none">: Property path patterns in SPARQL*</span></li><li><a href="#issue-container-number-6">Issue 6</a><span style="text-transform: none">: FIND instead of BIND</span></li><li><a href="#issue-container-number-9">Issue 9</a><span style="text-transform: none">: Include Annotation syntax in Turtle* and SPARQL*</span></li><li><a href="#issue-container-number-43">Issue 43</a><span style="text-transform: none">: New mime types and XML namespace for the extended query result formats</span></li><li><a href="#issue-container-number-14">Issue 14</a><span style="text-transform: none">: Section that defines SPARQL* Update</span></li><li><a href="#issue-container-number-95">Issue 95</a><span style="text-transform: none">: alternative semantic characterisations for RDF*</span></li></ul></section>


<section id="references" class="appendix"><h2 id="c-references"><bdi class="secno">C. </bdi>References<a class="self-link" aria-label="§" href="#references"></a></h2><section id="normative-references">
    <h3 id="c-1-normative-references"><bdi class="secno">C.1 </bdi>Normative references<a class="self-link" aria-label="§" href="#normative-references"></a></h3>
    <dl class="bibliography"><dt id="bib-n-quads">[N-QUADS]</dt><dd><a href="https://www.w3.org/TR/n-quads/"><cite>RDF 1.1 N-Quads</cite></a>. Gavin Carothers.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/n-quads/">https://www.w3.org/TR/n-quads/</a></dd><dt id="bib-n-triples">[N-TRIPLES]</dt><dd><a href="https://www.w3.org/TR/n-triples/"><cite>RDF 1.1 N-Triples</cite></a>. Gavin Carothers; Andy Seaborne.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/n-triples/">https://www.w3.org/TR/n-triples/</a></dd><dt id="bib-rdf-sparql-xmlres">[rdf-sparql-XMLres]</dt><dd><a href="https://www.w3.org/TR/rdf-sparql-XMLres/"><cite>SPARQL Query Results XML Format (Second Edition)</cite></a>. Dave Beckett; Jeen Broekstra.  W3C. 21 March 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf-sparql-XMLres/">https://www.w3.org/TR/rdf-sparql-XMLres/</a></dd><dt id="bib-rdf11-concepts">[RDF11-CONCEPTS]</dt><dd><a href="https://www.w3.org/TR/rdf11-concepts/"><cite>RDF 1.1 Concepts and Abstract Syntax</cite></a>. Richard Cyganiak; David Wood; Markus Lanthaler.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf11-concepts/">https://www.w3.org/TR/rdf11-concepts/</a></dd><dt id="bib-rdf11-mt">[RDF11-MT]</dt><dd><a href="https://www.w3.org/TR/rdf11-mt/"><cite>RDF 1.1 Semantics</cite></a>. Patrick Hayes; Peter Patel-Schneider.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf11-mt/">https://www.w3.org/TR/rdf11-mt/</a></dd><dt id="bib-rfc2119">[RFC2119]</dt><dd><a href="https://tools.ietf.org/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a></dd><dt id="bib-rfc8174">[RFC8174]</dt><dd><a href="https://tools.ietf.org/html/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc8174">https://tools.ietf.org/html/rfc8174</a></dd><dt id="bib-sparql11-query">[SPARQL11-QUERY]</dt><dd><a href="https://www.w3.org/TR/sparql11-query/"><cite>SPARQL 1.1 Query Language</cite></a>. Steven Harris; Andy Seaborne.  W3C. 21 March 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/sparql11-query/">https://www.w3.org/TR/sparql11-query/</a></dd><dt id="bib-sparql11-results-json">[sparql11-results-json]</dt><dd><a href="https://www.w3.org/TR/sparql11-results-json/"><cite>SPARQL 1.1 Query Results JSON Format</cite></a>. Andy Seaborne.  W3C. 21 March 2013. W3C Recommendation. URL: <a href="https://www.w3.org/TR/sparql11-results-json/">https://www.w3.org/TR/sparql11-results-json/</a></dd><dt id="bib-turtle">[TURTLE]</dt><dd><a href="https://www.w3.org/TR/turtle/"><cite>RDF 1.1 Turtle</cite></a>. Eric Prud'hommeaux; Gavin Carothers.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/turtle/">https://www.w3.org/TR/turtle/</a></dd><dt id="bib-xml">[XML]</dt><dd><a href="https://www.w3.org/TR/xml/"><cite>Extensible Markup Language (XML) 1.0 (Fifth Edition)</cite></a>. Tim Bray; Jean Paoli; Michael Sperberg-McQueen; Eve Maler; François Yergeau et al.  W3C. 26 November 2008. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xml/">https://www.w3.org/TR/xml/</a></dd></dl>
  </section><section id="informative-references">
    <h3 id="c-2-informative-references"><bdi class="secno">C.2 </bdi>Informative references<a class="self-link" aria-label="§" href="#informative-references"></a></h3>
    <dl class="bibliography"><dt id="bib-rdf-star-foundation">[RDF-STAR-FOUNDATION]</dt><dd><a href="http://ceur-ws.org/Vol-1912/paper12.pdf"><cite>Foundations of RDF* and SPARQL* - An Alternative Approach to Statement-Level Metadata in RDF.</cite></a>. Olaf Hartig.  In Proceedings of the 11th Alberto Mendelzon International Workshop on Foundations of Data Management (AMW), Montevideo, Uruguay. June 2017. URL: <a href="http://ceur-ws.org/Vol-1912/paper12.pdf">http://ceur-ws.org/Vol-1912/paper12.pdf</a></dd><dt id="bib-rdf-syntax-grammar">[RDF-SYNTAX-GRAMMAR]</dt><dd><a href="https://www.w3.org/TR/rdf-syntax-grammar/"><cite>RDF 1.1 XML Syntax</cite></a>. Fabien Gandon; Guus Schreiber.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf-syntax-grammar/">https://www.w3.org/TR/rdf-syntax-grammar/</a></dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><aside class="dfn-panel" id="dfn-panel-for-dfn-blank-node" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-blank-node">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-default-graph" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-default-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-graph-name" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-graph-name">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-iri" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-iri">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-literal" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-literal">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-named-graphs" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-named-graphs">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-object" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-object">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-predicate" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-predicate">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-rdf-dataset" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-dataset">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-rdf-graph" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-rdf-triple" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-triple">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-subject" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-subject">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-graph" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-graph">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-graph-1">2. Concepts and Abstract Syntax</a> <a href="#ref-for-dfn-graph-2">(2)</a> <a href="#ref-for-dfn-graph-3">(3)</a> <a href="#ref-for-dfn-graph-4">(4)</a> <a href="#ref-for-dfn-graph-5">(5)</a> <a href="#ref-for-dfn-graph-6">(6)</a> <a href="#ref-for-dfn-graph-7">(7)</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-8">3.1 Turtle-star</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-9">3.1.2 Parsing</a> <a href="#ref-for-dfn-graph-10">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-11">3.2.2 Parsing</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-12">3.3 N-Quads-star</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-13">4.1 Initial Definitions</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-14">4.4 Evaluation Semantics</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-15">6. RDF-star Semantics</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-16">6.1 Mapping RDF-star abstract syntax to RDF</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-17">6.2 Entailment of RDF-star graphs</a> <a href="#ref-for-dfn-graph-18">(2)</a> <a href="#ref-for-dfn-graph-19">(3)</a> <a href="#ref-for-dfn-graph-20">(4)</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-21">6.3.1 Combining RDF-star graphs</a> <a href="#ref-for-dfn-graph-22">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-graph-23">6.3.2 Considerations on interoperability</a> <a href="#ref-for-dfn-graph-24">(2)</a> <a href="#ref-for-dfn-graph-25">(3)</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-triple" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-triple">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-triple-1">2. Concepts and Abstract Syntax</a> <a href="#ref-for-dfn-triple-2">(2)</a> <a href="#ref-for-dfn-triple-3">(3)</a> <a href="#ref-for-dfn-triple-4">(4)</a> <a href="#ref-for-dfn-triple-5">(5)</a> <a href="#ref-for-dfn-triple-6">(6)</a> <a href="#ref-for-dfn-triple-7">(7)</a> <a href="#ref-for-dfn-triple-8">(8)</a> <a href="#ref-for-dfn-triple-9">(9)</a> <a href="#ref-for-dfn-triple-10">(10)</a> <a href="#ref-for-dfn-triple-11">(11)</a> <a href="#ref-for-dfn-triple-12">(12)</a> <a href="#ref-for-dfn-triple-13">(13)</a> <a href="#ref-for-dfn-triple-14">(14)</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-15">2.1 Triples and occurrences</a> <a href="#ref-for-dfn-triple-16">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-17">3.1.2 Parsing</a> <a href="#ref-for-dfn-triple-18">(2)</a> <a href="#ref-for-dfn-triple-19">(3)</a> <a href="#ref-for-dfn-triple-20">(4)</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-21">3.2 N-Triples-star</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-22">3.2.2 Parsing</a> <a href="#ref-for-dfn-triple-23">(2)</a> <a href="#ref-for-dfn-triple-24">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-25">3.3 N-Quads-star</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-26">4.1 Initial Definitions</a> <a href="#ref-for-dfn-triple-27">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-28">6.1 Mapping RDF-star abstract syntax to RDF</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-rdf-star-terms" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-star-terms">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-rdf-star-terms-1">2.1 Triples and occurrences</a> 
  </li><li>
    <a href="#ref-for-dfn-rdf-star-terms-2">3.1.2 Parsing</a> <a href="#ref-for-dfn-rdf-star-terms-3">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-rdf-star-terms-4">4.1 Initial Definitions</a> <a href="#ref-for-dfn-rdf-star-terms-5">(2)</a> <a href="#ref-for-dfn-rdf-star-terms-6">(3)</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-constituent" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-constituent">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-constituent-1">2. Concepts and Abstract Syntax</a> <a href="#ref-for-dfn-constituent-2">(2)</a> <a href="#ref-for-dfn-constituent-3">(3)</a> <a href="#ref-for-dfn-constituent-4">(4)</a> 
  </li><li>
    <a href="#ref-for-dfn-constituent-5">6.1 Mapping RDF-star abstract syntax to RDF</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-embedded" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-embedded">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-embedded-1">2. Concepts and Abstract Syntax</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-2">2.1 Triples and occurrences</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-3">3.1.1 Grammar</a> <a href="#ref-for-dfn-embedded-4">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-5">3.1.2 Parsing</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-6">3.2 N-Triples-star</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-7">3.2.1 Grammar</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-8">3.3 N-Quads-star</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-9">4.2 Grammar</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-10">4.5 Query Result Formats</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-11">4.5.1 SPARQL-star Query Results JSON Format</a> <a href="#ref-for-dfn-embedded-12">(2)</a> <a href="#ref-for-dfn-embedded-13">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-14">4.5.2 SPARQL-star Query Results XML Format</a> <a href="#ref-for-dfn-embedded-15">(2)</a> <a href="#ref-for-dfn-embedded-16">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-17">6.1 Mapping RDF-star abstract syntax to RDF</a> <a href="#ref-for-dfn-embedded-18">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-19">6.3.1 Combining RDF-star graphs</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-20">6.3.2 Considerations on interoperability</a> <a href="#ref-for-dfn-embedded-21">(2)</a> <a href="#ref-for-dfn-embedded-22">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-23">A.1 SA-mode and PG-mode</a> <a href="#ref-for-dfn-embedded-24">(2)</a> <a href="#ref-for-dfn-embedded-25">(3)</a> <a href="#ref-for-dfn-embedded-26">(4)</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-asserted" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-asserted">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-asserted-1">2. Concepts and Abstract Syntax</a> 
  </li><li>
    <a href="#ref-for-dfn-asserted-2">3.1.1 Grammar</a> 
  </li><li>
    <a href="#ref-for-dfn-asserted-3">6.1 Mapping RDF-star abstract syntax to RDF</a> <a href="#ref-for-dfn-asserted-4">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-asserted-5">A.1 SA-mode and PG-mode</a> <a href="#ref-for-dfn-asserted-6">(2)</a> <a href="#ref-for-dfn-asserted-7">(3)</a> <a href="#ref-for-dfn-asserted-8">(4)</a> <a href="#ref-for-dfn-asserted-9">(5)</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-dataset" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-dataset">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-dataset-1">2. Concepts and Abstract Syntax</a> <a href="#ref-for-dfn-dataset-2">(2)</a> 
  </li><li>
    <a href="#ref-for-dfn-dataset-3">3.3 N-Quads-star</a> 
  </li><li>
    <a href="#ref-for-dfn-dataset-4">4.4 Evaluation Semantics</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-rdf-term" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-term">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-variable" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-variable">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-triple-pattern" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-triple-pattern">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-property-path-pattern" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-property-path-pattern">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-property-path-expression" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-property-path-expression">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-solution-mapping" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-solution-mapping">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-triple-star-pattern" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-triple-star-pattern">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-triple-star-pattern-1">4.1 Initial Definitions</a> <a href="#ref-for-dfn-triple-star-pattern-2">(2)</a> <a href="#ref-for-dfn-triple-star-pattern-3">(3)</a> <a href="#ref-for-dfn-triple-star-pattern-4">(4)</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-star-pattern-5">4.2 Grammar</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-star-pattern-6">4.3.3 Translate Property Path Patterns</a> <a href="#ref-for-dfn-triple-star-pattern-7">(2)</a> <a href="#ref-for-dfn-triple-star-pattern-8">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-star-pattern-9">4.3.5 Translate BIND Clauses with an Embedded Triple Pattern</a> 
  </li><li>
    <a href="#ref-for-dfn-triple-star-pattern-10">4.4 Evaluation Semantics</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-bgp-star" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-bgp-star">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-bgp-star-1">4.1 Initial Definitions</a> <a href="#ref-for-dfn-bgp-star-2">(2)</a> <a href="#ref-for-dfn-bgp-star-3">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-bgp-star-4">4.3.1 Variable Scope</a> 
  </li><li>
    <a href="#ref-for-dfn-bgp-star-5">4.3.4 Translate Basic Graph Patterns</a> 
  </li><li>
    <a href="#ref-for-dfn-bgp-star-6">4.4 Evaluation Semantics</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-ppp-star" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-ppp-star">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-ppp-star-1">4.3.3 Translate Property Path Patterns</a> <a href="#ref-for-dfn-ppp-star-2">(2)</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-solution-star-mapping" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-solution-star-mapping">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-solution-star-mapping-1">4.1 Initial Definitions</a> <a href="#ref-for-dfn-solution-star-mapping-2">(2)</a> <a href="#ref-for-dfn-solution-star-mapping-3">(3)</a> <a href="#ref-for-dfn-solution-star-mapping-4">(4)</a> <a href="#ref-for-dfn-solution-star-mapping-5">(5)</a> 
  </li><li>
    <a href="#ref-for-dfn-solution-star-mapping-6">4.4 Evaluation Semantics</a> <a href="#ref-for-dfn-solution-star-mapping-7">(2)</a> <a href="#ref-for-dfn-solution-star-mapping-8">(3)</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-compatibility" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-compatibility">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-rdf-star-instance-mapping" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdf-star-instance-mapping">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-rdf-star-instance-mapping-1">4.1 Initial Definitions</a> 
  </li><li>
    <a href="#ref-for-dfn-rdf-star-instance-mapping-2">4.4 Evaluation Semantics</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-bgp-star-solution" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-bgp-star-solution">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-bgp-star-solution-1">4.4 Evaluation Semantics</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-embedded-triple-patterns" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-embedded-triple-patterns">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
    <li>
    <a href="#ref-for-dfn-embedded-triple-patterns-1">4.2 Grammar</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-triple-patterns-2">4.3.1 Variable Scope</a> <a href="#ref-for-dfn-embedded-triple-patterns-3">(2)</a> <a href="#ref-for-dfn-embedded-triple-patterns-4">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-triple-patterns-5">4.3.2 Expand Syntax Forms</a> <a href="#ref-for-dfn-embedded-triple-patterns-6">(2)</a> <a href="#ref-for-dfn-embedded-triple-patterns-7">(3)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-triple-patterns-8">4.3.3 Translate Property Path Patterns</a> <a href="#ref-for-dfn-embedded-triple-patterns-9">(2)</a> <a href="#ref-for-dfn-embedded-triple-patterns-10">(3)</a> <a href="#ref-for-dfn-embedded-triple-patterns-11">(4)</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-triple-patterns-12">4.3.4 Translate Basic Graph Patterns</a> 
  </li><li>
    <a href="#ref-for-dfn-embedded-triple-patterns-13">4.3.5 Translate BIND Clauses with an Embedded Triple Pattern</a> <a href="#ref-for-dfn-embedded-triple-patterns-14">(2)</a> <a href="#ref-for-dfn-embedded-triple-patterns-15">(3)</a> <a href="#ref-for-dfn-embedded-triple-patterns-16">(4)</a> 
  </li>
  </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-datatype" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-datatype">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-lexical-form" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-lexical-form">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-simple-literal" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-simple-literal">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-ill-typed" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-ill-typed">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-merge" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-merge">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-satisfiable" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-satisfiable">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-unsatisfiable" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-unsatisfiable">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-entail" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-entail">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><aside class="dfn-panel" id="dfn-panel-for-dfn-equivalent" hidden="">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-equivalent">Permalink</a>
         
      </div>
      <b>Referenced in:</b>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </aside><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(dfnPanel);
} else {
  dfnPanel();
}

function dfnPanel() {
  /** @type {HTMLElement} */
  let panel;
  document.body.addEventListener("click", event => {
    if (!(event.target instanceof HTMLElement)) return;

    /** @type {HTMLElement} */
    const el = event.target;

    const action = deriveAction(el);
    switch (action) {
      case "show": {
        if (panel) hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = el.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        displayPanel(dfn, panel, { x: event.clientX, y: event.clientY });
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        break;
      }
    }
  });
}

/** @param {HTMLElement} clickTarget */
function deriveAction(clickTarget) {
  const hitALink = !!clickTarget.closest("a");
  if (clickTarget.closest("dfn, .index-term")) {
    return hitALink ? null : "show";
  }
  if (clickTarget.closest(".dfn-panel")) {
    if (hitALink) {
      const clickedSelfLink = clickTarget.classList.contains("self-link");
      return clickedSelfLink ? "hide" : "dock";
    }
    const panel = clickTarget.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : null;
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return null;
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>